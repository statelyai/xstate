<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>åŠ¨ä½œ Actions | XState æ–‡æ¡£</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://plausible.io/js/plausible.js" defer="defer"></script>
    <meta name="description" content="XState æ–‡æ¡£ï¼šç°ä»£ Web çš„çŠ¶æ€æœºå’ŒçŠ¶æ€å›¾">
    
    <link rel="preload" href="/docs/assets/css/0.styles.8a221dd5.css" as="style"><link rel="preload" href="/docs/assets/js/app.b1166240.js" as="script"><link rel="preload" href="/docs/assets/js/3.0f500953.js" as="script"><link rel="preload" href="/docs/assets/js/12.91d2277e.js" as="script"><link rel="preload" href="/docs/assets/js/172.8a352738.js" as="script"><link rel="preload" href="/docs/assets/js/13.849ee94d.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.1c53c5e1.js"><link rel="prefetch" href="/docs/assets/js/100.058985b8.js"><link rel="prefetch" href="/docs/assets/js/101.7e5c6308.js"><link rel="prefetch" href="/docs/assets/js/102.41c20b2b.js"><link rel="prefetch" href="/docs/assets/js/103.3390bb0f.js"><link rel="prefetch" href="/docs/assets/js/104.1a0547a1.js"><link rel="prefetch" href="/docs/assets/js/105.b2c564e9.js"><link rel="prefetch" href="/docs/assets/js/106.8dc7c06c.js"><link rel="prefetch" href="/docs/assets/js/107.4c7952ce.js"><link rel="prefetch" href="/docs/assets/js/108.2009f7ca.js"><link rel="prefetch" href="/docs/assets/js/109.6967c4d6.js"><link rel="prefetch" href="/docs/assets/js/11.87881b49.js"><link rel="prefetch" href="/docs/assets/js/110.788f7ef9.js"><link rel="prefetch" href="/docs/assets/js/111.bd37b286.js"><link rel="prefetch" href="/docs/assets/js/112.6b30ba41.js"><link rel="prefetch" href="/docs/assets/js/113.936feaf3.js"><link rel="prefetch" href="/docs/assets/js/114.17c2ddd1.js"><link rel="prefetch" href="/docs/assets/js/115.e99f1d85.js"><link rel="prefetch" href="/docs/assets/js/116.3834bde2.js"><link rel="prefetch" href="/docs/assets/js/117.1783296a.js"><link rel="prefetch" href="/docs/assets/js/118.de4021fb.js"><link rel="prefetch" href="/docs/assets/js/119.9ce6108a.js"><link rel="prefetch" href="/docs/assets/js/120.aa3cb15d.js"><link rel="prefetch" href="/docs/assets/js/121.090cd0eb.js"><link rel="prefetch" href="/docs/assets/js/122.669c9b9a.js"><link rel="prefetch" href="/docs/assets/js/123.9340349e.js"><link rel="prefetch" href="/docs/assets/js/124.82bf248f.js"><link rel="prefetch" href="/docs/assets/js/125.c2183726.js"><link rel="prefetch" href="/docs/assets/js/126.b80164ce.js"><link rel="prefetch" href="/docs/assets/js/127.da474367.js"><link rel="prefetch" href="/docs/assets/js/128.88a5c0e8.js"><link rel="prefetch" href="/docs/assets/js/129.fa3aa9f0.js"><link rel="prefetch" href="/docs/assets/js/130.9715c88c.js"><link rel="prefetch" href="/docs/assets/js/131.750a04c4.js"><link rel="prefetch" href="/docs/assets/js/132.972e86e3.js"><link rel="prefetch" href="/docs/assets/js/133.d3b4a907.js"><link rel="prefetch" href="/docs/assets/js/134.86ebc8c3.js"><link rel="prefetch" href="/docs/assets/js/135.99f64b59.js"><link rel="prefetch" href="/docs/assets/js/136.e3c083b3.js"><link rel="prefetch" href="/docs/assets/js/137.bd2c5dee.js"><link rel="prefetch" href="/docs/assets/js/138.97f53f5a.js"><link rel="prefetch" href="/docs/assets/js/139.b5fd536b.js"><link rel="prefetch" href="/docs/assets/js/14.b73ae4c4.js"><link rel="prefetch" href="/docs/assets/js/140.e39a7ce9.js"><link rel="prefetch" href="/docs/assets/js/141.0cca46f5.js"><link rel="prefetch" href="/docs/assets/js/142.8a68be41.js"><link rel="prefetch" href="/docs/assets/js/143.1a91f081.js"><link rel="prefetch" href="/docs/assets/js/144.1f6897f2.js"><link rel="prefetch" href="/docs/assets/js/145.2ac2084e.js"><link rel="prefetch" href="/docs/assets/js/146.2ff18753.js"><link rel="prefetch" href="/docs/assets/js/147.509adb0e.js"><link rel="prefetch" href="/docs/assets/js/148.05d872b2.js"><link rel="prefetch" href="/docs/assets/js/149.67eb4722.js"><link rel="prefetch" href="/docs/assets/js/15.33ce7b11.js"><link rel="prefetch" href="/docs/assets/js/150.7faa190b.js"><link rel="prefetch" href="/docs/assets/js/151.9cf5cdf2.js"><link rel="prefetch" href="/docs/assets/js/152.3cb63d70.js"><link rel="prefetch" href="/docs/assets/js/153.6e22519c.js"><link rel="prefetch" href="/docs/assets/js/154.5f8dfe8a.js"><link rel="prefetch" href="/docs/assets/js/155.3a5b901c.js"><link rel="prefetch" href="/docs/assets/js/156.d8fabe92.js"><link rel="prefetch" href="/docs/assets/js/157.6b1bd8fd.js"><link rel="prefetch" href="/docs/assets/js/158.d80a7e6f.js"><link rel="prefetch" href="/docs/assets/js/159.30415db1.js"><link rel="prefetch" href="/docs/assets/js/16.79901385.js"><link rel="prefetch" href="/docs/assets/js/160.02a47b36.js"><link rel="prefetch" href="/docs/assets/js/161.3b10566c.js"><link rel="prefetch" href="/docs/assets/js/162.6fafcec3.js"><link rel="prefetch" href="/docs/assets/js/163.39fd0205.js"><link rel="prefetch" href="/docs/assets/js/164.c1b95846.js"><link rel="prefetch" href="/docs/assets/js/165.94f171bd.js"><link rel="prefetch" href="/docs/assets/js/166.1b07cf91.js"><link rel="prefetch" href="/docs/assets/js/167.3e1d20e0.js"><link rel="prefetch" href="/docs/assets/js/168.9e358920.js"><link rel="prefetch" href="/docs/assets/js/169.d0cb7ebd.js"><link rel="prefetch" href="/docs/assets/js/17.72da34a1.js"><link rel="prefetch" href="/docs/assets/js/170.cfa804e7.js"><link rel="prefetch" href="/docs/assets/js/171.a93a0675.js"><link rel="prefetch" href="/docs/assets/js/173.535d4602.js"><link rel="prefetch" href="/docs/assets/js/174.d901f558.js"><link rel="prefetch" href="/docs/assets/js/175.dde208a1.js"><link rel="prefetch" href="/docs/assets/js/176.918519b6.js"><link rel="prefetch" href="/docs/assets/js/177.071ded81.js"><link rel="prefetch" href="/docs/assets/js/178.1977769d.js"><link rel="prefetch" href="/docs/assets/js/179.8ab6ae61.js"><link rel="prefetch" href="/docs/assets/js/18.e75e8faa.js"><link rel="prefetch" href="/docs/assets/js/180.c1656fe9.js"><link rel="prefetch" href="/docs/assets/js/181.fafbe561.js"><link rel="prefetch" href="/docs/assets/js/182.cfe2dd5c.js"><link rel="prefetch" href="/docs/assets/js/183.1e0dc4b0.js"><link rel="prefetch" href="/docs/assets/js/184.7e1a6cc4.js"><link rel="prefetch" href="/docs/assets/js/185.a0d5e352.js"><link rel="prefetch" href="/docs/assets/js/186.b0be58c8.js"><link rel="prefetch" href="/docs/assets/js/187.83b2e52a.js"><link rel="prefetch" href="/docs/assets/js/188.7e55f9d2.js"><link rel="prefetch" href="/docs/assets/js/189.2691869f.js"><link rel="prefetch" href="/docs/assets/js/19.9ed243e2.js"><link rel="prefetch" href="/docs/assets/js/190.a4d2ce64.js"><link rel="prefetch" href="/docs/assets/js/191.6a309382.js"><link rel="prefetch" href="/docs/assets/js/192.9f6f957e.js"><link rel="prefetch" href="/docs/assets/js/193.80acbb4d.js"><link rel="prefetch" href="/docs/assets/js/194.d06272e2.js"><link rel="prefetch" href="/docs/assets/js/195.69863b35.js"><link rel="prefetch" href="/docs/assets/js/196.a174ffc4.js"><link rel="prefetch" href="/docs/assets/js/197.b741df5e.js"><link rel="prefetch" href="/docs/assets/js/198.2e43b0fa.js"><link rel="prefetch" href="/docs/assets/js/199.88e0f96f.js"><link rel="prefetch" href="/docs/assets/js/20.c25c6f46.js"><link rel="prefetch" href="/docs/assets/js/200.07db53cf.js"><link rel="prefetch" href="/docs/assets/js/201.4958eb75.js"><link rel="prefetch" href="/docs/assets/js/202.8c1882bc.js"><link rel="prefetch" href="/docs/assets/js/203.9de2b1dd.js"><link rel="prefetch" href="/docs/assets/js/204.b1ed2223.js"><link rel="prefetch" href="/docs/assets/js/205.2b054ba3.js"><link rel="prefetch" href="/docs/assets/js/206.72991636.js"><link rel="prefetch" href="/docs/assets/js/207.0e8606da.js"><link rel="prefetch" href="/docs/assets/js/208.39148668.js"><link rel="prefetch" href="/docs/assets/js/209.37284581.js"><link rel="prefetch" href="/docs/assets/js/21.2797df21.js"><link rel="prefetch" href="/docs/assets/js/210.685802ba.js"><link rel="prefetch" href="/docs/assets/js/211.0fc25c48.js"><link rel="prefetch" href="/docs/assets/js/212.fda94cae.js"><link rel="prefetch" href="/docs/assets/js/213.22171ef7.js"><link rel="prefetch" href="/docs/assets/js/214.3752e0a4.js"><link rel="prefetch" href="/docs/assets/js/215.35078b60.js"><link rel="prefetch" href="/docs/assets/js/216.8374a12d.js"><link rel="prefetch" href="/docs/assets/js/217.dccacdc0.js"><link rel="prefetch" href="/docs/assets/js/218.5a317aaa.js"><link rel="prefetch" href="/docs/assets/js/219.9efc7a53.js"><link rel="prefetch" href="/docs/assets/js/22.c94e4afc.js"><link rel="prefetch" href="/docs/assets/js/220.0f391318.js"><link rel="prefetch" href="/docs/assets/js/221.d0384b20.js"><link rel="prefetch" href="/docs/assets/js/222.0d06ace4.js"><link rel="prefetch" href="/docs/assets/js/223.fb309c20.js"><link rel="prefetch" href="/docs/assets/js/224.7e0a1769.js"><link rel="prefetch" href="/docs/assets/js/225.0333d350.js"><link rel="prefetch" href="/docs/assets/js/226.ab724e96.js"><link rel="prefetch" href="/docs/assets/js/227.4c002e7d.js"><link rel="prefetch" href="/docs/assets/js/228.d86b744c.js"><link rel="prefetch" href="/docs/assets/js/229.8a50db9d.js"><link rel="prefetch" href="/docs/assets/js/23.09397c8e.js"><link rel="prefetch" href="/docs/assets/js/24.07404d04.js"><link rel="prefetch" href="/docs/assets/js/25.5eb7321e.js"><link rel="prefetch" href="/docs/assets/js/26.f28aa72b.js"><link rel="prefetch" href="/docs/assets/js/27.6aea7d1e.js"><link rel="prefetch" href="/docs/assets/js/28.f173ff96.js"><link rel="prefetch" href="/docs/assets/js/29.2f7d11f5.js"><link rel="prefetch" href="/docs/assets/js/30.f5bbcc03.js"><link rel="prefetch" href="/docs/assets/js/31.4a84dbcc.js"><link rel="prefetch" href="/docs/assets/js/32.1ac677d7.js"><link rel="prefetch" href="/docs/assets/js/33.9c21566c.js"><link rel="prefetch" href="/docs/assets/js/34.dc7b9a30.js"><link rel="prefetch" href="/docs/assets/js/35.1fa3ac7c.js"><link rel="prefetch" href="/docs/assets/js/36.01fd9ecd.js"><link rel="prefetch" href="/docs/assets/js/37.138a7d50.js"><link rel="prefetch" href="/docs/assets/js/38.baea50c2.js"><link rel="prefetch" href="/docs/assets/js/39.bc44548f.js"><link rel="prefetch" href="/docs/assets/js/4.9ae53091.js"><link rel="prefetch" href="/docs/assets/js/40.be96ae64.js"><link rel="prefetch" href="/docs/assets/js/41.0f1b6855.js"><link rel="prefetch" href="/docs/assets/js/42.e1362e40.js"><link rel="prefetch" href="/docs/assets/js/43.32066367.js"><link rel="prefetch" href="/docs/assets/js/44.57c094f1.js"><link rel="prefetch" href="/docs/assets/js/45.ecf450bc.js"><link rel="prefetch" href="/docs/assets/js/46.0f7cd87e.js"><link rel="prefetch" href="/docs/assets/js/47.b6c9ac06.js"><link rel="prefetch" href="/docs/assets/js/48.674df931.js"><link rel="prefetch" href="/docs/assets/js/49.1a47080b.js"><link rel="prefetch" href="/docs/assets/js/5.b5ba5f53.js"><link rel="prefetch" href="/docs/assets/js/50.1f845dfc.js"><link rel="prefetch" href="/docs/assets/js/51.99c74a75.js"><link rel="prefetch" href="/docs/assets/js/52.68103fc2.js"><link rel="prefetch" href="/docs/assets/js/53.7a724eb3.js"><link rel="prefetch" href="/docs/assets/js/54.02a99ba8.js"><link rel="prefetch" href="/docs/assets/js/55.12164426.js"><link rel="prefetch" href="/docs/assets/js/56.0cd63326.js"><link rel="prefetch" href="/docs/assets/js/57.cc940e9e.js"><link rel="prefetch" href="/docs/assets/js/58.14e1598b.js"><link rel="prefetch" href="/docs/assets/js/59.f42267cd.js"><link rel="prefetch" href="/docs/assets/js/6.c5430922.js"><link rel="prefetch" href="/docs/assets/js/60.3634c03d.js"><link rel="prefetch" href="/docs/assets/js/61.91ce7c90.js"><link rel="prefetch" href="/docs/assets/js/62.01fa31a1.js"><link rel="prefetch" href="/docs/assets/js/63.56e8e6e6.js"><link rel="prefetch" href="/docs/assets/js/64.378ef981.js"><link rel="prefetch" href="/docs/assets/js/65.af446493.js"><link rel="prefetch" href="/docs/assets/js/66.e78366d5.js"><link rel="prefetch" href="/docs/assets/js/67.bf70ad7a.js"><link rel="prefetch" href="/docs/assets/js/68.fc18590e.js"><link rel="prefetch" href="/docs/assets/js/69.44e39a68.js"><link rel="prefetch" href="/docs/assets/js/7.506ca2b4.js"><link rel="prefetch" href="/docs/assets/js/70.92d2c5ad.js"><link rel="prefetch" href="/docs/assets/js/71.6b6fa5d0.js"><link rel="prefetch" href="/docs/assets/js/72.b399fc1e.js"><link rel="prefetch" href="/docs/assets/js/73.79066a06.js"><link rel="prefetch" href="/docs/assets/js/74.c09f5550.js"><link rel="prefetch" href="/docs/assets/js/75.23bc6b26.js"><link rel="prefetch" href="/docs/assets/js/76.d7c634e0.js"><link rel="prefetch" href="/docs/assets/js/77.342dd87d.js"><link rel="prefetch" href="/docs/assets/js/78.d78e5e0e.js"><link rel="prefetch" href="/docs/assets/js/79.28174585.js"><link rel="prefetch" href="/docs/assets/js/8.d2121246.js"><link rel="prefetch" href="/docs/assets/js/80.2a2555db.js"><link rel="prefetch" href="/docs/assets/js/81.82bee833.js"><link rel="prefetch" href="/docs/assets/js/82.1748c3f3.js"><link rel="prefetch" href="/docs/assets/js/83.332ee3d8.js"><link rel="prefetch" href="/docs/assets/js/84.9841814a.js"><link rel="prefetch" href="/docs/assets/js/85.f5277739.js"><link rel="prefetch" href="/docs/assets/js/86.b93310ee.js"><link rel="prefetch" href="/docs/assets/js/87.4c4e8d2f.js"><link rel="prefetch" href="/docs/assets/js/88.4a5dd5e6.js"><link rel="prefetch" href="/docs/assets/js/89.0bed5ecb.js"><link rel="prefetch" href="/docs/assets/js/9.ed9f275e.js"><link rel="prefetch" href="/docs/assets/js/90.4cf02519.js"><link rel="prefetch" href="/docs/assets/js/91.7dadc6ff.js"><link rel="prefetch" href="/docs/assets/js/92.2eae2d6c.js"><link rel="prefetch" href="/docs/assets/js/93.446d8ed5.js"><link rel="prefetch" href="/docs/assets/js/94.4257273f.js"><link rel="prefetch" href="/docs/assets/js/95.ccaea0b2.js"><link rel="prefetch" href="/docs/assets/js/96.460690c0.js"><link rel="prefetch" href="/docs/assets/js/97.9439ad83.js"><link rel="prefetch" href="/docs/assets/js/98.8be9618e.js"><link rel="prefetch" href="/docs/assets/js/99.f3cff76a.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.00c8f6e8.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.8a221dd5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/zh/" class="home-link router-link-active"><img src="/docs/logo.svg" alt="XState æ–‡æ¡£" class="logo"> <span class="site-name can-hide">XState æ–‡æ¡£</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://paka.dev/npm/xstate/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://stately.ai/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¯è§†åŒ–å·¥å…·
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/xtWgFTgvNV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/statelyai/xstate/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç¤¾åŒº
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/guides/actions.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/zh/guides/actions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li><li class="dropdown-item"><!----> <a href="/docs/fr/guides/actions.html" class="nav-link">
  FranÃ§ais
</a></li></ul></div></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://paka.dev/npm/xstate/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://stately.ai/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å¯è§†åŒ–å·¥å…·
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/xtWgFTgvNV" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/statelyai/xstate/discussions" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç¤¾åŒº
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/guides/actions.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/docs/zh/guides/actions.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li><li class="dropdown-item"><!----> <a href="/docs/fr/guides/actions.html" class="nav-link">
  FranÃ§ais
</a></li></ul></div></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ä»€ä¹ˆæ˜¯ XState?</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å…³äº</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å‘å¯¼</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/zh/guides/start.html" class="sidebar-link">å…¥é—¨</a></li><li><a href="/docs/zh/guides/installation.html" class="sidebar-link">å®‰è£…</a></li><li><a href="/docs/zh/guides/introduction-to-state-machines-and-statecharts/" class="sidebar-link">çŠ¶æ€æœºå’ŒçŠ¶æ€å›¾ç®€ä»‹</a></li><li><a href="/docs/zh/guides/machines.html" class="sidebar-link">çŠ¶æ€æœº Machines</a></li><li><a href="/docs/zh/guides/states.html" class="sidebar-link">çŠ¶æ€ State</a></li><li><a href="/docs/zh/guides/statenodes.html" class="sidebar-link">çŠ¶æ€èŠ‚ç‚¹</a></li><li><a href="/docs/zh/guides/events.html" class="sidebar-link">äº‹ä»¶ Event</a></li><li><a href="/docs/zh/guides/transitions.html" class="sidebar-link">è½¬æ¢ Transitions</a></li><li><a href="/docs/zh/guides/hierarchical.html" class="sidebar-link">åˆ†å±‚çŠ¶æ€èŠ‚ç‚¹ Hierarchical State Node</a></li><li><a href="/docs/zh/guides/parallel.html" class="sidebar-link">å¹¶è¡ŒçŠ¶æ€èŠ‚ç‚¹ Parallel State Node</a></li><li><a href="/docs/zh/guides/final.html" class="sidebar-link">æœ€ç»ˆçŠ¶æ€</a></li><li><a href="/docs/zh/guides/effects.html" class="sidebar-link">ä½œç”¨ Effects</a></li><li><a href="/docs/zh/guides/actions.html" aria-current="page" class="active sidebar-link">åŠ¨ä½œ Actions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#å£°æ˜åŠ¨ä½œ" class="sidebar-link">å£°æ˜åŠ¨ä½œ</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#åŠ¨ä½œé¡ºåº" class="sidebar-link">åŠ¨ä½œé¡ºåº</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#å‘é€åŠ¨ä½œ-send-action" class="sidebar-link">å‘é€åŠ¨ä½œï¼ˆsend actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#å‡é«˜åŠ¨ä½œ-raise-action" class="sidebar-link">å‡é«˜åŠ¨ä½œï¼ˆraise actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#å“åº”åŠ¨ä½œ-respond-action" class="sidebar-link">å“åº”åŠ¨ä½œ ï¼ˆrespond actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#è½¬å‘åŠ¨ä½œ-forwardto-action" class="sidebar-link">è½¬å‘åŠ¨ä½œï¼ˆforwardTo actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#é”™è¯¯å‡çº§åŠ¨ä½œ-escalate-action" class="sidebar-link">é”™è¯¯å‡çº§åŠ¨ä½œï¼ˆescalate actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#æ—¥å¿—åŠ¨ä½œ-log-action" class="sidebar-link">æ—¥å¿—åŠ¨ä½œï¼ˆlog actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#é€‰æ‹©åŠ¨ä½œ-choose-action" class="sidebar-link">é€‰æ‹©åŠ¨ä½œï¼ˆchoose actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#çº¯åŠ¨ä½œ-pure-action" class="sidebar-link">çº¯åŠ¨ä½œï¼ˆpure actionï¼‰</a></li><li class="sidebar-sub-header"><a href="/docs/zh/guides/actions.html#è‡ªè½¬æ¢åŠ¨ä½œ" class="sidebar-link">è‡ªè½¬æ¢åŠ¨ä½œ</a></li></ul></li><li><a href="/docs/zh/guides/guards.html" class="sidebar-link">å®ˆå«ï¼ˆGuardedï¼‰è½¬æ¢</a></li><li><a href="/docs/zh/guides/context.html" class="sidebar-link">ä¸Šä¸‹æ–‡ Context</a></li><li><a href="/docs/zh/guides/models.html" class="sidebar-link">æ¨¡å‹ Models</a></li><li><a href="/docs/zh/guides/activities.html" class="sidebar-link">æ´»åŠ¨ Activities</a></li><li><a href="/docs/zh/guides/communication.html" class="sidebar-link">è°ƒç”¨ Services</a></li><li><a href="/docs/zh/guides/actors.html" class="sidebar-link">æ¼”å‘˜ Actors</a></li><li><a href="/docs/zh/guides/delays.html" class="sidebar-link">å»¶è¿Ÿäº‹ä»¶ å’Œ è½¬æ¢</a></li><li><a href="/docs/zh/guides/history.html" class="sidebar-link">å†å² History</a></li><li><a href="/docs/zh/guides/ids.html" class="sidebar-link">æ ‡è¯† State èŠ‚ç‚¹</a></li><li><a href="/docs/zh/guides/interpretation.html" class="sidebar-link">è§£é‡Šï¼ˆInterpretingï¼‰ çŠ¶æ€æœº</a></li><li><a href="/docs/zh/guides/testing.html" class="sidebar-link">æµ‹è¯•çŠ¶æ€æœº</a></li><li><a href="/docs/zh/guides/typescript.html" class="sidebar-link">ä½¿ç”¨ TypeScript</a></li><li><a href="/docs/zh/guides/scxml.html" class="sidebar-link">SCXML</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ•™ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é…æ–¹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åŒ…</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¨¡å¼</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç¤ºä¾‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ–°é—»å’Œæœ‰ç”¨åœ°å€</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="åŠ¨ä½œ-actions"><a href="#åŠ¨ä½œ-actions" class="header-anchor">#</a> åŠ¨ä½œ Actions</h1> <p>åŠ¨ä½œï¼Œæ˜¯å³å‘å³å¼ƒçš„ <a href="/docs/zh/guides/effects.html">ä½œç”¨</a>ã€‚ å®ƒä»¬å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å£°æ˜ï¼š</p> <ul><li><code>entry</code> åŠ¨ä½œï¼Œè¿›å…¥çŠ¶æ€æ—¶æ‰§è¡Œ</li> <li><code>exit</code> åŠ¨ä½œï¼Œé€€å‡ºçŠ¶æ€æ—¶æ‰§è¡Œ</li> <li>æ‰§è¡Œè½¬æ¢æ—¶ï¼Œæ‰§è¡Œè½¬æ¢çš„åŠ¨ä½œ</li></ul> <p>è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯» <a href="/docs/zh/guides/introduction-to-state-machines-and-statecharts/#actions">çŠ¶æ€å›¾ç®€ä»‹ä¸­çš„åŠ¨ä½œ</a>ã€‚</p> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>å¯ä»¥åƒè¿™æ ·æ·»åŠ åŠ¨ä½œ</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> triggerMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'trigger'</span><span class="token punctuation">,</span>
    initial<span class="token operator">:</span> <span class="token string">'inactive'</span><span class="token punctuation">,</span>
    states<span class="token operator">:</span> <span class="token punctuation">{</span>
      inactive<span class="token operator">:</span> <span class="token punctuation">{</span>
        on<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token constant">TRIGGER</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            target<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
            <span class="token comment">// è½¬æ¢ actions</span>
            actions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token string">'sendTelemetry'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      active<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿›å…¥ actions</span>
        entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'notifyActive'</span><span class="token punctuation">,</span> <span class="token string">'sendTelemetry'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// é€€å‡º actions</span>
        exit<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'notifyInactive'</span><span class="token punctuation">,</span> <span class="token string">'sendTelemetry'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        on<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token constant">STOP</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'inactive'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    actions<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// action å®ç°</span>
      <span class="token function-variable function">activate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'activating...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">notifyActive</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'active!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">notifyInactive</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inactive!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">sendTelemetry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'time:'</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><details><summary>
    ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ è½¬æ¢ VS entry/exit åŠ¨ä½œï¼Ÿ
  </summary> <p>è¿™å–å†³äºï¼ å®ƒä»¬çš„åšçš„äº‹ä¸åŒï¼š</p> <ul><li>entry/exit æ“ä½œï¼Œæ„å‘³ç€â€œåœ¨è¿›å…¥/é€€å‡ºæ­¤çŠ¶æ€çš„ä»»ä½•è½¬æ¢ä¸Š <strong>æ‰§è¡Œæ­¤ åŠ¨ä½œ</strong>â€ã€‚ å½“ åŠ¨ä½œ åªä¾èµ–äºå®ƒæ‰€åœ¨çš„çŠ¶æ€èŠ‚ç‚¹ï¼Œè€Œä¸ä¾èµ–äºä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªçŠ¶æ€èŠ‚ç‚¹ æˆ– äº‹ä»¶æ—¶ï¼Œä½¿ç”¨è¿›å…¥/é€€å‡º åŠ¨ä½œ</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token punctuation">{</span>
  idle<span class="token operator">:</span> <span class="token punctuation">{</span>
    on<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token constant">LOAD</span><span class="token operator">:</span> <span class="token string">'loading'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  loading<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¯å½“è¿›å…¥â€œloadingâ€çŠ¶æ€æ—¶æ‰§è¡Œæ­¤ åŠ¨ä½œ</span>
    entry<span class="token operator">:</span> <span class="token string">'fetchData'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><ul><li>è½¬æ¢ åŠ¨ä½œ æ„å‘³ç€â€œä»…åœ¨æ­¤è½¬æ¢ä¸Š <strong>æ‰§è¡Œæ­¤ åŠ¨ä½œ</strong>â€ã€‚ å½“ åŠ¨ä½œ ä¾èµ–äºäº‹ä»¶å’Œå®ƒå½“å‰æ‰€å¤„çš„çŠ¶æ€èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨è½¬æ¢ åŠ¨ä½œã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token punctuation">{</span>
  idle<span class="token operator">:</span> <span class="token punctuation">{</span>
    on<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token constant">LOAD</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">'loading'</span><span class="token punctuation">,</span>
        <span class="token comment">// æ­¤ åŠ¨ä½œ ä»…åœ¨æ­¤è½¬æ¢æ—¶æ‰§è¡Œ</span>
        actions<span class="token operator">:</span> <span class="token string">'fetchData'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  loading<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div></details> <div class="custom-block tip"><p class="custom-block-title">æç¤º</p> <p>å¯ä»¥é€šè¿‡ç›´æ¥åœ¨çŠ¶æ€æœºé…ç½®ä¸­æŒ‡å®š åŠ¨ä½œ å‡½æ•°æ¥å¿«é€ŸåŸå‹åŒ– åŠ¨ä½œ å®ç°ï¼š</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><br><br><br></div><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token constant">TRIGGER</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  target<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">actions</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'activating...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><p>åœ¨çŠ¶æ€æœºé€‰é¡¹çš„ <code>actions</code> å±æ€§ä¸­é‡æ„å†…è” åŠ¨ä½œ å®ç°ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°è°ƒè¯•ã€åºåˆ—åŒ–ã€æµ‹è¯•å’Œå‡†ç¡®åœ°å¯è§†åŒ– åŠ¨ä½œã€‚</p></div> <h2 id="å£°æ˜åŠ¨ä½œ"><a href="#å£°æ˜åŠ¨ä½œ" class="header-anchor">#</a> å£°æ˜åŠ¨ä½œ</h2> <p>ä» <code>machine.transition(...)</code> è¿”å›çš„ <code>State</code> å®ä¾‹æœ‰ä¸€ä¸ª <code>.actions</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¾› è§£é‡Šï¼ˆinterpretï¼‰ æ‰§è¡Œçš„ åŠ¨ä½œ å¯¹è±¡æ•°ç»„ï¼š</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br></div><pre class="language-js"><code><span class="token keyword">const</span> activeState <span class="token operator">=</span> triggerMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'inactive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'TRIGGER'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>activeState<span class="token punctuation">.</span>actions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">//   { type: 'activate', exec: ... },</span>
<span class="token comment">//   { type: 'sendTelemetry', exec: ... },</span>
<span class="token comment">//   { type: 'notifyActive', exec: ... },</span>
<span class="token comment">//   { type: 'sendTelemetry', exec: ... }</span>
<span class="token comment">// ]</span>
</code></pre></div><p>æ¯ä¸ª åŠ¨ä½œ å¯¹è±¡éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼ˆä»¥åŠå…¶ä»–å¯ä»¥æŒ‡å®šçš„å±æ€§ï¼‰ï¼š</p> <ul><li><code>type</code> - åŠ¨ä½œ ç±»å‹</li> <li><code>exec</code> - åŠ¨ä½œ æ‰§è¡Œå‡½æ•°</li></ul> <p><code>exec</code> å‡½æ•°æœ‰ 3 ä¸ªå‚æ•°ï¼š</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>context</code></td> <td>TContext</td> <td>å½“å‰çŠ¶æ€æœºçš„ä¸Šä¸‹æ–‡</td></tr> <tr><td><code>event</code></td> <td>event object</td> <td>å¯¼è‡´è½¬æ¢çš„äº‹ä»¶</td></tr> <tr><td><code>actionMeta</code></td> <td>meta object</td> <td>åŒ…å«æœ‰å…³ åŠ¨ä½œ çš„å…ƒæ•°æ®çš„å¯¹è±¡ï¼ˆè§ä¸‹æ–‡ï¼‰</td></tr></tbody></table> <p><code>actionMeta</code> å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å±æ€§ï¼š</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>action</code></td> <td>action object</td> <td>åŸå§‹ åŠ¨ä½œ å¯¹è±¡</td></tr> <tr><td><code>state</code></td> <td>State</td> <td>è½¬æ¢åçš„å·²è§£æçš„çŠ¶æ€æœºçŠ¶æ€</td></tr></tbody></table> <p>è§£é‡Šï¼ˆinterpretï¼‰å°†è°ƒç”¨å¸¦æœ‰ <code>currentState.context</code>ã€<code>event</code> å’ŒçŠ¶æ€æœºè½¬æ¢åˆ°çš„ <code>state</code> çš„ <code>exec</code> å‡½æ•°ã€‚ ä½ å¯ä»¥è‡ªå®šä¹‰æ­¤ åŠ¨ä½œã€‚ é˜…è¯» <a href="/docs/zh/guides/interpretation.html#executing-actions">æ‰§è¡Œ åŠ¨ä½œ</a> äº†è§£æ›´å¤šè¯¦æƒ…ã€‚</p> <h2 id="åŠ¨ä½œé¡ºåº"><a href="#åŠ¨ä½œé¡ºåº" class="header-anchor">#</a> åŠ¨ä½œé¡ºåº</h2> <p>åœ¨æ‰§è¡ŒçŠ¶æ€å›¾æ—¶ï¼ŒåŠ¨ä½œçš„é¡ºåºä¸ä¸€å®šé‡è¦ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä¸åº”è¯¥ç›¸äº’ä¾èµ–ï¼‰ã€‚ ä½†æ˜¯ï¼Œ<code>state.actions</code> æ•°ç»„ä¸­çš„æ“ä½œé¡ºåºæ˜¯ï¼š</p> <ol><li><code>exit</code> åŠ¨ä½œ - é€€å‡ºçŠ¶æ€èŠ‚ç‚¹çš„æ‰€æœ‰é€€å‡º åŠ¨ä½œï¼Œä»åŸå­çŠ¶æ€èŠ‚ç‚¹å¼€å§‹</li> <li>è½¬æ¢ <code>actions</code> - åœ¨æ‰€é€‰è½¬æ¢ä¸Šå®šä¹‰çš„æ‰€æœ‰ åŠ¨ä½œ</li> <li><code>entry</code> åŠ¨ä½œ - è¿›å…¥çŠ¶æ€èŠ‚ç‚¹çš„æ‰€æœ‰è¿›å…¥ åŠ¨ä½œï¼Œä»çˆ¶çŠ¶æ€å¼€å§‹</li></ol> <div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>åœ¨ XState 4.x ç‰ˆä¸­ï¼Œ<code>assign</code> åŠ¨ä½œ å…·æœ‰ä¼˜å…ˆæƒï¼Œå¹¶ä¸”åœ¨ä»»ä½•å…¶ä»– åŠ¨ä½œ ä¹‹å‰æ‰§è¡Œã€‚ æ­¤è¡Œä¸ºå°†åœ¨ç¬¬ 5 ç‰ˆä¸­ä¿®å¤ï¼Œå› ä¸ºå°†æŒ‰é¡ºåºè°ƒç”¨ <code>assign</code> æ“ä½œã€‚</p></div> <div class="custom-block danger"><p class="custom-block-title">è­¦å‘Š</p> <p>æ­¤å¤„è®°å½•çš„æ‰€æœ‰ åŠ¨ä½œ åˆ›å»ºè€…éƒ½è¿”å› <strong>åŠ¨ä½œ å¯¹è±¡</strong>ï¼› å®ƒæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒåªè¿”å›ä¸€ä¸ª åŠ¨ä½œ å¯¹è±¡ï¼Œå¹¶ <em>ä¸æ˜¯</em> å‘½ä»¤å¼çš„å‘é€ä¸€ä¸ªäº‹ä»¶ã€‚ ä¸è¦å‘½ä»¤å¼çš„è°ƒç”¨ åŠ¨ä½œ åˆ›å»ºè€…ï¼› å› ä¸º ä»–ä»¬ä»€ä¹ˆéƒ½ä¸ä¼šåšï¼</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ğŸš« ä¸è¦è¿™æ ·åšï¼</span>
<span class="token function-variable function">entry</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸš« è¿™å°†ä»€ä¹ˆä¹Ÿä¸åšï¼› send() ä¸æ˜¯å‘½ä»¤å¼å‡½æ•°ï¼</span>
  <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; { type: 'xstate.send', event: { type: 'SOME_EVENT' } }</span>

<span class="token comment">// âœ… è¿™æ ·æ›¿æ¢</span>
entry<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="å‘é€åŠ¨ä½œ-send-action"><a href="#å‘é€åŠ¨ä½œ-send-action" class="header-anchor">#</a> å‘é€åŠ¨ä½œï¼ˆsend actionï¼‰</h2> <div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>The <code>send(...)</code> action creator is deprecated in favor of the <code>sendTo(...)</code> action creator:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">send({ type: 'EVENT' }, { to: 'someActor' });
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">sendTo('someActor', { type: 'EVENT' });
</span></span></code></pre></div><p>For sending events to self, <code>raise(...)</code> should be used:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">send({ type: 'EVENT' });
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">raise({ type: 'EVENT' });
</span></span></code></pre></div><p>The <code>send(...)</code> action creator will be removed in XState v5.0.</p></div> <p><code>send(event)</code> åŠ¨ä½œ åˆ›å»ºè€…åˆ›å»ºäº†ä¸€ä¸ªç‰¹æ®Šçš„â€œå‘é€â€ åŠ¨ä½œ å¯¹è±¡ï¼Œå®ƒå‘Šè¯‰æœåŠ¡ï¼ˆå³ï¼Œ<a href="/docs/zh/guides/interpretation.html">è§£é‡Šï¼ˆinterpretï¼‰ çŠ¶æ€æœº</a>ï¼‰å°†è¯¥äº‹ä»¶å‘é€ç»™å®ƒè‡ªå·±ã€‚ å®ƒåœ¨å¤–éƒ¨äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå°†ä¸€ä¸ªäº‹ä»¶æ’å…¥æ­£åœ¨è¿è¡Œçš„æœåŠ¡ä¸­ï¼Œè¿™æ„å‘³ç€è¯¥äº‹ä»¶å°†åœ¨ è§£é‡Šï¼ˆinterpretï¼‰ çš„ä¸‹ä¸€æ­¥â€œæ­¥éª¤â€ä¸Šå‘é€ã€‚</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>event</code></td> <td>string or event object or event expression</td> <td>å‘é€åˆ°æŒ‡å®š<code>options.to</code>ï¼ˆæˆ– selfï¼‰çš„äº‹ä»¶</td></tr> <tr><td><code>options?</code></td> <td>send options (è§ä¸‹æ–‡)</td> <td>å‘é€äº‹ä»¶çš„é€‰é¡¹ã€‚</td></tr></tbody></table> <p>send <code>options</code> å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„å¯¹è±¡ï¼š</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>id?</code></td> <td>string</td> <td>send ID (ç”¨äºå–æ¶ˆ)</td></tr> <tr><td><code>to?</code></td> <td>string</td> <td>äº‹ä»¶çš„ç›®æ ‡ï¼ˆé»˜è®¤ä¸º selfï¼‰</td></tr> <tr><td><code>delay?</code></td> <td>number</td> <td>å‘é€äº‹ä»¶å‰çš„è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œå¦‚æœåœ¨è¶…æ—¶å‰æ²¡æœ‰å–æ¶ˆäº‹ä»¶</td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p><code>send(...)</code> å‡½æ•°æ˜¯ä¸€ä¸ª <strong>åŠ¨ä½œ åˆ›å»ºè€…</strong>ï¼› å®ƒæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå®ƒåªè¿”å›ä¸€ä¸ª åŠ¨ä½œ å¯¹è±¡ï¼Œå¹¶ <em>ä¸ä¼š</em> å‘½ä»¤å¼åœ°å‘é€ä¸€ä¸ªäº‹ä»¶ã€‚</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> send <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> lazyStubbornMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'stubborn'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'inactive'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    inactive<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TOGGLE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
          <span class="token comment">// å†æ¬¡å‘æœåŠ¡å‘é€ TOGGLE äº‹ä»¶</span>
          actions<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'TOGGLE'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    active<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TOGGLE</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'inactive'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nextState <span class="token operator">=</span> lazyStubbornMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'inactive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'TOGGLE'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nextState<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'active'</span>
nextState<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// =&gt; [{ type: 'xstate.send', event: { type: 'TOGGLE' }}]</span>

<span class="token comment">// è¯¥æœåŠ¡å°†ç»§ç»­å‘è‡ªå·±å‘é€ { type: 'TOGGLE' } äº‹ä»¶ã€‚</span>
</code></pre></div><p>ä¼ é€’ç»™ <code>send(event)</code> çš„ <code>event</code> å‚æ•°å¯ä»¥æ˜¯ï¼š</p> <ul><li>ä¸€ä¸ªå­—ç¬¦ä¸²äº‹ä»¶ï¼Œä¾‹å¦‚ <code>send('TOGGLE')</code></li> <li>ä¸€ä¸ªå¯¹è±¡äº‹ä»¶ï¼Œä¾‹å¦‚ <code>send({ type: 'TOGGLE', payload: ... })</code></li> <li>ä¸€ä¸ªäº‹ä»¶è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶è§¦å‘ <code>send()</code> åŠ¨ä½œ çš„å½“å‰ <code>context</code> å’Œ <code>event</code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼š</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> send <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token comment">// äººä¸ºçš„ä¾‹å­ - ä» `context` è¯»å–å¹¶å‘é€åŠ¨æ€åˆ›å»ºçš„äº‹ä»¶</span>
<span class="token keyword">const</span> sendName <span class="token operator">=</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'NAME'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> context<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> machine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  on<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">TOGGLE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      actions<span class="token operator">:</span> sendName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="å‘é€ç›®æ ‡"><a href="#å‘é€ç›®æ ‡" class="header-anchor">#</a> å‘é€ç›®æ ‡</h3> <p>ä» <code>send(...)</code> åŠ¨ä½œ åˆ›å»ºè€…å‘é€çš„äº‹ä»¶ï¼Œå¯ä»¥è¡¨ç¤ºå®ƒåº”è¯¥å‘é€åˆ°ç‰¹å®šç›®æ ‡ï¼Œä¾‹å¦‚ <a href="/docs/zh/guides/communication.html">è°ƒç”¨ æœåŠ¡</a> æˆ– <a href="/docs/zh/guides/actors.html">åˆ›å»º æ¼”å‘˜</a>ã€‚ è¿™æ˜¯é€šè¿‡åœ¨ <code>send(...)</code> æ“ä½œä¸­æŒ‡å®š <code>{ to: ... }</code> å±æ€§æ¥å®Œæˆçš„ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'some-service-id'</span><span class="token punctuation">,</span>
  src<span class="token operator">:</span> <span class="token string">'someService'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
<span class="token comment">// è¡¨ç¤ºå‘è°ƒç”¨çš„æœåŠ¡å‘é€ { type: 'SOME_EVENT' }</span>
actions<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> <span class="token string">'some-service-id'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>to</code> å±æ€§ä¸­çš„ target ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª <strong>target è¡¨è¾¾å¼</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—å½“å‰è§¦å‘åŠ¨ä½œçš„ <code>context</code> å’Œ <code>event</code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² target æˆ–ä¸€ä¸ª <a href="/docs/zh/guides/actors.html#spawning-actors">æ¼”å‘˜</a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>entry<span class="token operator">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">someActor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span>someMachine<span class="token punctuation">,</span> <span class="token string">'some-actor-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// å‘é€ { type: 'SOME_EVENT' } åˆ° æ¼”å‘˜ å¼•ç”¨</span>
  <span class="token punctuation">{</span>
    actions<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token function-variable function">to</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> context<span class="token punctuation">.</span>someActor
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>åŒæ ·ï¼Œ<code>send(...)</code> å‡½æ•°æ˜¯ä¸€ä¸ª åŠ¨ä½œ åˆ›å»ºè€…ï¼Œ<strong>ä¸ä¼šå‘½ä»¤å¼å‘é€äº‹ä»¶ã€‚</strong> ç›¸åï¼Œå®ƒè¿”å›ä¸€ä¸ª åŠ¨ä½œ å¯¹è±¡ï¼Œæè¿°äº‹ä»¶å°†å‘é€åˆ°çš„ä½ç½®ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'SOME_EVENT'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> <span class="token string">'child'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// logs:</span>
<span class="token comment">// {</span>
<span class="token comment">//   type: 'xstate.send',</span>
<span class="token comment">//   to: 'child',</span>
<span class="token comment">//   event: {</span>
<span class="token comment">//     type: 'SOME_EVENT'</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div></div> <p>è¦ä»å­çŠ¶æ€æœºå‘é€åˆ°çˆ¶çŠ¶æ€æœºï¼Œè¯·ä½¿ç”¨ <code>sendParent(event)</code>ï¼ˆé‡‡ç”¨ä¸ <code>send(...)</code> ç›¸åŒçš„å‚æ•°ï¼‰ã€‚</p> <h2 id="å‡é«˜åŠ¨ä½œ-raise-action"><a href="#å‡é«˜åŠ¨ä½œ-raise-action" class="header-anchor">#</a> å‡é«˜åŠ¨ä½œï¼ˆraise actionï¼‰</h2> <p><code>raise()</code> åŠ¨ä½œ åˆ›å»ºè€…åœ¨å†…éƒ¨äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå°†ä¸€ä¸ªäº‹ä»¶æ’å…¥çŠ¶æ€å›¾ã€‚ è¿™æ„å‘³ç€äº‹ä»¶ä¼šåœ¨ è§£é‡Šï¼ˆinterpretï¼‰ çš„å½“å‰â€œæ­¥éª¤â€ä¸Šç«‹å³å‘é€ã€‚</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>event</code></td> <td>string or event object</td> <td>è¦æå‡çš„äº‹ä»¶</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> raise <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> raiseActionDemo <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'raisedmo'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'entry'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">STEP</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'middle'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token constant">RAISE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'middle'</span><span class="token punctuation">,</span>
          <span class="token comment">// ç«‹å³ä¸ºâ€œmiddleâ€è°ƒç”¨ NEXT äº‹ä»¶</span>
          actions<span class="token operator">:</span> <span class="token function">raise</span><span class="token punctuation">(</span><span class="token string">'NEXT'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    middle<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">NEXT</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'last'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    last<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">RESET</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'entry'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å•å‡» <a href="https://stately.ai/viz?gist=fd763ff2c161b172f719891e2544d428" target="_blank" rel="noopener noreferrer">visualizer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¸­çš„â€œSTEPâ€å’Œâ€œRAISEâ€äº‹ä»¶ä»¥æŸ¥çœ‹å·®å¼‚ã€‚</p> <h2 id="å“åº”åŠ¨ä½œ-respond-action"><a href="#å“åº”åŠ¨ä½œ-respond-action" class="header-anchor">#</a> å“åº”åŠ¨ä½œ ï¼ˆrespond actionï¼‰ <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>4.7+</span></h2> <p><code>respond()</code> åŠ¨ä½œ åˆ›å»ºè€…åˆ›å»ºä¸€ä¸ª <a href="#send-action"><code>send()</code> åŠ¨ä½œ</a>ï¼Œè¯¥ åŠ¨ä½œ è¢«å‘é€åˆ°ï¼Œè§¦å‘å“åº”çš„äº‹ä»¶çš„æœåŠ¡ã€‚</p> <p>è¿™åœ¨å†…éƒ¨ä½¿ç”¨ <a href="/docs/zh/guides/scxml.html#events">SCXML äº‹ä»¶</a> ï¼Œä»äº‹ä»¶ä¸­è·å– <code>origin</code>ï¼Œå¹¶å°† <code>send()</code> åŠ¨ä½œ çš„ <code>to</code> è®¾ç½®ä¸º <code>origin</code>ã€‚</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>event</code></td> <td>string, event object, or send expression</td> <td>å‘é€å›å‘ä»¶äººçš„äº‹ä»¶</td></tr> <tr><td><code>options?</code></td> <td>send options object</td> <td>ä¼ é€’åˆ° <code>send()</code> äº‹ä»¶çš„é€‰é¡¹</td></tr></tbody></table> <h3 id="ä½¿ç”¨å“åº”-action-çš„ç¤ºä¾‹"><a href="#ä½¿ç”¨å“åº”-action-çš„ç¤ºä¾‹" class="header-anchor">#</a> ä½¿ç”¨å“åº” action çš„ç¤ºä¾‹</h3> <p>è¿™æ¼”ç¤ºäº†ä¸€äº›çˆ¶æœåŠ¡ï¼ˆ<code>authClientMachine</code>ï¼‰å‘è°ƒç”¨çš„ <code>authServerMachine</code> å‘é€ä¸€ä¸ª <code>'CODE'</code> äº‹ä»¶ï¼Œå¹¶ä¸” <code>authServerMachine</code> å“åº”ä¸€ä¸ª <code>'TOKEN'</code> äº‹ä»¶ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> authServerMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  initial<span class="token operator">:</span> <span class="token string">'waitingForCode'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    waitingForCode<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">CODE</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          actions<span class="token operator">:</span> <span class="token function">respond</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'TOKEN'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> delay<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> authClientMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  initial<span class="token operator">:</span> <span class="token string">'idle'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    idle<span class="token operator">:</span> <span class="token punctuation">{</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">AUTH</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'authorizing'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    authorizing<span class="token operator">:</span> <span class="token punctuation">{</span>
      invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'auth-server'</span><span class="token punctuation">,</span>
        src<span class="token operator">:</span> authServerMachine
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      entry<span class="token operator">:</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'CODE'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> <span class="token string">'auth-server'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TOKEN</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'authorized'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    authorized<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'final'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯¦æƒ…è¯·å‚é˜… <a href="/docs/zh/guides/actors.html#sending-responses">ğŸ“– å‘é€å“åº”</a>ã€‚</p> <h2 id="è½¬å‘åŠ¨ä½œ-forwardto-action"><a href="#è½¬å‘åŠ¨ä½œ-forwardto-action" class="header-anchor">#</a> è½¬å‘åŠ¨ä½œï¼ˆforwardTo actionï¼‰ <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>4.7+</span></h2> <p><code>forwardTo()</code> åŠ¨ä½œ åˆ›å»ºè€…ï¼Œåˆ›å»ºä¸€ä¸ª <a href="#send-action"><code>send()</code> åŠ¨ä½œ</a>ï¼Œé€šè¿‡å…¶ ID å°†æœ€è¿‘çš„äº‹ä»¶è½¬å‘åˆ°æŒ‡å®šçš„æœåŠ¡ã€‚</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>target</code></td> <td>string or function that returns service</td> <td>è¦å°†æœ€è¿‘äº‹ä»¶å‘é€åˆ°çš„ç›®æ ‡æœåŠ¡ã€‚</td></tr></tbody></table> <h3 id="ä½¿ç”¨-forwardto-åŠ¨ä½œ-çš„ç¤ºä¾‹"><a href="#ä½¿ç”¨-forwardto-åŠ¨ä½œ-çš„ç¤ºä¾‹" class="header-anchor">#</a> ä½¿ç”¨ forwardTo åŠ¨ä½œ çš„ç¤ºä¾‹</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> forwardTo<span class="token punctuation">,</span> interpret <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">alertService</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> receive</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'ALERT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> parentMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'parent'</span><span class="token punctuation">,</span>
  invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'alerter'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">src</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> alertService
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token constant">ALERT</span><span class="token operator">:</span> <span class="token punctuation">{</span> actions<span class="token operator">:</span> <span class="token function">forwardTo</span><span class="token punctuation">(</span><span class="token string">'alerter'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> parentService <span class="token operator">=</span> <span class="token function">interpret</span><span class="token punctuation">(</span>parentMachine<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parentService<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'ALERT'</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'hello world'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; alerts &quot;hello world&quot;</span>
</code></pre></div><h2 id="é”™è¯¯å‡çº§åŠ¨ä½œ-escalate-action"><a href="#é”™è¯¯å‡çº§åŠ¨ä½œ-escalate-action" class="header-anchor">#</a> é”™è¯¯å‡çº§åŠ¨ä½œï¼ˆescalate actionï¼‰ <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>4.7+</span></h2> <p><code>escalate()</code> åŠ¨ä½œ åˆ›å»ºè€…ï¼Œé€šè¿‡å°†é”™è¯¯å‘é€åˆ°çˆ¶çŠ¶æ€æœºæ¥å‡çº§é”™è¯¯ã€‚ è¿™æ˜¯ä½œä¸ºçŠ¶æ€æœºè¯†åˆ«çš„ç‰¹æ®Šé”™è¯¯äº‹ä»¶å‘é€çš„ã€‚</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>errorData</code></td> <td>any</td> <td>è¦å‡é«˜ï¼ˆsendï¼‰åˆ°çˆ¶çº§çš„é”™è¯¯æ•°æ®ã€‚</td></tr></tbody></table> <h3 id="ä½¿ç”¨-escalate-åŠ¨ä½œ-çš„ç¤ºä¾‹"><a href="#ä½¿ç”¨-escalate-åŠ¨ä½œ-çš„ç¤ºä¾‹" class="header-anchor">#</a> ä½¿ç”¨ escalate åŠ¨ä½œ çš„ç¤ºä¾‹</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> escalate <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> childMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// è¿™å°†è¢«å‘é€åˆ°è°ƒç”¨è¿™ä¸ªå­©å­çš„çˆ¶çŠ¶æ€æœº</span>
  entry<span class="token operator">:</span> <span class="token function">escalate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'This is some error'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> parentMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  invoke<span class="token operator">:</span> <span class="token punctuation">{</span>
    src<span class="token operator">:</span> childMachine<span class="token punctuation">,</span>
    onError<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">actions</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//  {</span>
        <span class="token comment">//    type: ...,</span>
        <span class="token comment">//    data: {</span>
        <span class="token comment">//      message: 'This is some error'</span>
        <span class="token comment">//    }</span>
        <span class="token comment">//  }</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ—¥å¿—åŠ¨ä½œ-log-action"><a href="#æ—¥å¿—åŠ¨ä½œ-log-action" class="header-anchor">#</a> æ—¥å¿—åŠ¨ä½œï¼ˆlog actionï¼‰</h2> <p><code>log()</code> åŠ¨ä½œ åˆ›å»ºå™¨æ˜¯ä¸€ç§è®°å½•ä¸å½“å‰çŠ¶æ€ <code>context</code> å’Œ/æˆ– <code>event</code> ç›¸å…³çš„ä»»ä½•å†…å®¹çš„å£°æ˜æ–¹å¼ã€‚ å®ƒéœ€è¦ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼š</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>expr?</code></td> <td>string or function</td> <td>ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æˆ–ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä»¥ <code>context</code> å’Œ <code>event</code> ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªè¦è®°å½•çš„å€¼</td></tr> <tr><td><code>label?</code></td> <td>string</td> <td>ç”¨äºæ ‡è®°å·²è®°å½•æ¶ˆæ¯çš„å­—ç¬¦ä¸²</td></tr></tbody></table> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> loggingMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'logging'</span><span class="token punctuation">,</span>
  context<span class="token operator">:</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    start<span class="token operator">:</span> <span class="token punctuation">{</span>
      entry<span class="token operator">:</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'started!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">FINISH</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          target<span class="token operator">:</span> <span class="token string">'end'</span><span class="token punctuation">,</span>
          actions<span class="token operator">:</span> <span class="token function">log</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>context<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, event: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>event<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">'Finish label'</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    end<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> endState <span class="token operator">=</span> loggingMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span> <span class="token string">'FINISH'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

endState<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// [</span>
<span class="token comment">//   {</span>
<span class="token comment">//     type: 'xstate.log',</span>
<span class="token comment">//     label: 'Finish label',</span>
<span class="token comment">//     expr: (context, event) =&gt; ...</span>
<span class="token comment">//   }</span>
<span class="token comment">// ]</span>

<span class="token comment">// interpreter å°†æ ¹æ®å½“å‰çŠ¶æ€ä¸Šä¸‹æ–‡å’Œäº‹ä»¶è®°å½• Action çš„è¡¨è¾¾å¼ã€‚</span>
</code></pre></div><p>æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œ<code>log()</code> æ˜¯ä¸€ä¸ª åŠ¨ä½œï¼Œå®ƒè®°å½•ä¸€ä¸ªå…·æœ‰ <code>context</code> å’Œ <code>event</code> å±æ€§çš„å¯¹è±¡ï¼Œåˆ†åˆ«åŒ…å«å½“å‰ä¸Šä¸‹æ–‡å’Œè§¦å‘äº‹ä»¶ã€‚</p> <h2 id="é€‰æ‹©åŠ¨ä½œ-choose-action"><a href="#é€‰æ‹©åŠ¨ä½œ-choose-action" class="header-anchor">#</a> é€‰æ‹©åŠ¨ä½œï¼ˆchoose actionï¼‰</h2> <p><code>choose()</code> åŠ¨ä½œ åˆ›å»ºè€…åˆ›å»ºä¸€ä¸ª åŠ¨ä½œï¼Œè¯¥ åŠ¨ä½œ æŒ‡å®šåº”æ ¹æ®æŸäº›æ¡ä»¶æ‰§è¡Œå“ªäº› åŠ¨ä½œã€‚</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>conds</code></td> <td>array</td> <td>å½“ç»™å®šçš„ <code>cond</code> ä¸ºçœŸæ—¶ï¼ŒåŒ…å«è¦æ‰§è¡Œçš„ <code>actions</code> çš„å¯¹è±¡æ•°ç»„ï¼ˆè§ä¸‹æ–‡ï¼‰</td></tr></tbody></table> <p><strong>è¿”å›:</strong></p> <p>ä¸€ä¸ªç‰¹æ®Šçš„ <code>&quot;xstate.choose&quot;</code> åŠ¨ä½œ å¯¹è±¡ï¼Œå®ƒåœ¨å†…éƒ¨è¿›è¡Œåˆ¤æ–­ä»¥æœ‰æ¡ä»¶åœ°ç¡®å®šåº”è¯¥æ‰§è¡Œå“ªäº›åŠ¨ä½œå¯¹è±¡ã€‚</p> <p><code>cond</code> ä¸­çš„æ¯ä¸ªâ€œæ¡ä»¶åŠ¨ä½œâ€å¯¹è±¡éƒ½å…·æœ‰ä»¥ä¸‹å±æ€§ï¼š</p> <ul><li><code>actions</code> - è¦æ‰§è¡Œçš„ åŠ¨ä½œ å¯¹è±¡</li> <li><code>cond?</code> - æ‰§è¡Œè¿™äº› <code>actions</code> çš„æ¡ä»¶</li></ul> <div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>ä¸è¦ä½¿ç”¨ <code>choose()</code> åŠ¨ä½œ åˆ›å»ºå™¨æ¥æ‰§è¡Œ åŠ¨ä½œï¼Œå¦åˆ™è¿™äº› åŠ¨ä½œ å¯èƒ½è¡¨ç¤ºä¸ºé€šè¿‡ <code>entry</code>ã€<code>exit</code> æˆ– <code>actions</code> åœ¨æŸäº› çŠ¶æ€/è½¬æ¢ ä¸­æ‰§è¡Œçš„éæ¡ä»¶ åŠ¨ä½œã€‚</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> choose<span class="token punctuation">,</span> log <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token keyword">const</span> maybeDoThese <span class="token operator">=</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    cond<span class="token operator">:</span> <span class="token string">'cond1'</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// å½“â€œcond1â€ä¸ºçœŸæ—¶</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cond1 chosen!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    cond<span class="token operator">:</span> <span class="token string">'cond2'</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// å½“â€œcond1â€ä¸ºå‡ä¸”â€œcond2â€ä¸ºçœŸæ—¶</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">/* ... */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'another action'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">cond</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä¸€äº›æ¡ä»¶</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// å½“â€œcond1â€å’Œâ€œcond2â€ä¸ºå‡å¹¶ä¸”å†…è”`cond`ä¸ºçœŸæ—¶</span>
      <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸€äº›å…¶ä»– action</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fall-through action'</span><span class="token punctuation">)</span>
      <span class="token comment">// å½“â€œcond1â€ã€â€œcond2â€å’Œâ€œcond3â€ä¸ºå‡æ—¶</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™ç±»ä¼¼äº SCXML <code>&lt;if&gt;</code>ã€<code>&lt;elseif&gt;</code> å’Œ <code>&lt;else&gt;</code> å…ƒç´ ï¼š <a href="https://www.w3.org/TR/scxml/#if" target="_blank" rel="noopener noreferrer">www.w3.org/TR/scxml/#if<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="çº¯åŠ¨ä½œ-pure-action"><a href="#çº¯åŠ¨ä½œ-pure-action" class="header-anchor">#</a> çº¯åŠ¨ä½œï¼ˆpure actionï¼‰</h2> <p><code>pure()</code> åŠ¨ä½œ åˆ›å»ºå™¨æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼ˆå› æ­¤å¾—åï¼‰ï¼Œå®ƒæ ¹æ®è§¦å‘ åŠ¨ä½œ çš„å½“å‰çŠ¶æ€â€œä¸Šä¸‹æ–‡â€å’Œâ€œäº‹ä»¶â€è¿”å›è¦æ‰§è¡Œçš„ åŠ¨ä½œ å¯¹è±¡ã€‚ è¿™å…è®¸ä½ åŠ¨æ€å®šä¹‰åº”æ‰§è¡Œå“ªäº› åŠ¨ä½œ</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>getActions</code></td> <td>function</td> <td>æ ¹æ®ç»™å®šçš„ <code>context</code> å’Œ <code>event</code> è¿”å›è¦æ‰§è¡Œçš„åŠ¨ä½œå¯¹è±¡çš„å‡½æ•°ï¼ˆè§ä¸‹æ–‡ï¼‰</td></tr></tbody></table> <p><strong>è¿”å›:</strong></p> <p>ä¸€ä¸ªç‰¹æ®Šçš„ <code>&quot;xstate.pure&quot;</code> åŠ¨ä½œ å¯¹è±¡ï¼Œå®ƒå°†åœ¨å†…éƒ¨åˆ¤æ–­ <code>get</code> å±æ€§ä»¥ç¡®å®šåº”è¯¥æ‰§è¡Œçš„ åŠ¨ä½œ å¯¹è±¡ã€‚</p> <p><code>getActions(context, event)</code> å‚æ•°:</p> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>context</code></td> <td>object</td> <td>å½“å‰çŠ¶æ€çš„ <code>context</code></td></tr> <tr><td><code>event</code></td> <td>event object</td> <td>è§¦å‘ åŠ¨ä½œ çš„äº‹ä»¶å¯¹è±¡</td></tr></tbody></table> <p><strong>è¿”å›:</strong></p> <p>å•ä¸ª åŠ¨ä½œ å¯¹è±¡ã€ä¸€ç»„ åŠ¨ä½œ å¯¹è±¡æˆ–ä¸ä»£è¡¨ä»»ä½• åŠ¨ä½œ å¯¹è±¡çš„ <code>undefined</code>ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createMachine<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> pure <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

<span class="token comment">// åŠ¨æ€åœ°å‘æ¯ä¸ªè°ƒç”¨çš„ç¤ºä¾‹ actor å‘é€ä¸€ä¸ªäº‹ä»¶</span>
<span class="token keyword">const</span> sendToAllSampleActors <span class="token operator">=</span> <span class="token function">pure</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> context<span class="token punctuation">.</span>sampleActors<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sampleActor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'SOME_EVENT'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> to<span class="token operator">:</span> sampleActor <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; {</span>
<span class="token comment">//   type: ActionTypes.Pure,</span>
<span class="token comment">//   get: () =&gt; ... // è®¡ç®—ä¸º send() action æ•°ç»„</span>
<span class="token comment">// }</span>

<span class="token keyword">const</span> machine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    active<span class="token operator">:</span> <span class="token punctuation">{</span>
      entry<span class="token operator">:</span> sendToAllSampleActors
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="è‡ªè½¬æ¢åŠ¨ä½œ"><a href="#è‡ªè½¬æ¢åŠ¨ä½œ" class="header-anchor">#</a> è‡ªè½¬æ¢åŠ¨ä½œ</h2> <p><a href="/docs/zh/guides/transitions.html#self-transitions">è‡ªè½¬æ¢</a> æ˜¯å½“çŠ¶æ€è½¬æ¢åˆ°è‡ªèº«æ—¶ï¼Œå®ƒ <em>å¯èƒ½</em> é€€å‡ºç„¶åé‡æ–°è¿›å…¥è‡ªèº«ã€‚ è‡ªè½¬æ¢å¯ä»¥æ˜¯ <strong>å†…éƒ¨</strong> æˆ– <strong>å¤–éƒ¨</strong> è½¬æ¢ï¼š</p> <ul><li>å†…éƒ¨è½¬æ¢å°† <em>ä¸</em> é€€å‡ºå¹¶é‡æ–°è¿›å…¥è‡ªèº«ï¼Œå› æ­¤çŠ¶æ€èŠ‚ç‚¹çš„â€œè¿›å…¥â€å’Œâ€œé€€å‡ºâ€åŠ¨ä½œå°†ä¸ä¼šå†æ¬¡æ‰§è¡Œã€‚
<ul><li>å†…éƒ¨è½¬æ¢ç”¨ <code>{ internal: true }</code> è¡¨ç¤ºï¼Œæˆ–è€…å°† <code>target</code> ä¿ç•™ä¸º <code>undefined</code>ã€‚</li> <li>å°†æ‰§è¡Œåœ¨è½¬æ¢çš„ <code>actions</code> å±æ€§ä¸Šå®šä¹‰çš„ åŠ¨ä½œã€‚</li></ul></li> <li>å¤–éƒ¨è½¬æ¢ <em>å°†</em> é€€å‡ºå¹¶é‡æ–°è¿›å…¥è‡ªèº«ï¼Œå› æ­¤çŠ¶æ€èŠ‚ç‚¹çš„<code>entry</code> å’Œ<code>exit</code> action å°†å†æ¬¡æ‰§è¡Œã€‚
<ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è½¬æ¢éƒ½æ˜¯å¤–éƒ¨çš„ã€‚ ä¸ºäº†æ˜ç¡®èµ·è§ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>{ internal: false }</code> æ¥æŒ‡ç¤ºå®ƒä»¬ã€‚</li> <li>å°†æ‰§è¡Œåœ¨è½¬æ¢çš„ <code>actions</code> å±æ€§ä¸Šå®šä¹‰çš„ åŠ¨ä½œã€‚</li></ul></li></ul> <p>ä¾‹å¦‚ï¼Œè¿™ä¸ªè®¡æ•°å™¨çŠ¶æ€æœºï¼Œæœ‰ä¸€ä¸ªå¸¦æœ‰å†…éƒ¨å’Œå¤–éƒ¨è½¬æ¢çš„ <code>'counting'</code> çŠ¶æ€ï¼š</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> counterMachine <span class="token operator">=</span> <span class="token function">createMachine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'counter'</span><span class="token punctuation">,</span>
  initial<span class="token operator">:</span> <span class="token string">'counting'</span><span class="token punctuation">,</span>
  states<span class="token operator">:</span> <span class="token punctuation">{</span>
    counting<span class="token operator">:</span> <span class="token punctuation">{</span>
      entry<span class="token operator">:</span> <span class="token string">'enterCounting'</span><span class="token punctuation">,</span>
      exit<span class="token operator">:</span> <span class="token string">'exitCounting'</span><span class="token punctuation">,</span>
      on<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// è‡ªè½¬æ¢</span>
        <span class="token constant">INC</span><span class="token operator">:</span> <span class="token punctuation">{</span> actions<span class="token operator">:</span> <span class="token string">'increment'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// å†…éƒ¨ï¼ˆéšå¼ï¼‰</span>
        <span class="token constant">DEC</span><span class="token operator">:</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token string">'counting'</span><span class="token punctuation">,</span> actions<span class="token operator">:</span> <span class="token string">'decrement'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// å¤–éƒ¨</span>
        <span class="token constant">DO_NOTHING</span><span class="token operator">:</span> <span class="token punctuation">{</span> internal<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> actions<span class="token operator">:</span> <span class="token string">'logNothing'</span> <span class="token punctuation">}</span> <span class="token comment">// å†…éƒ¨ï¼ˆéšå¼ï¼‰</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¤–éƒ¨è½¬æ¢ï¼ˆé€€å‡º+ è½¬æ¢action +è¿›å…¥ï¼‰</span>
<span class="token keyword">const</span> stateA <span class="token operator">=</span> counterMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'counting'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'DEC'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stateA<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// ['exitCounting', 'decrement', 'enterCounting']</span>

<span class="token comment">// å†…éƒ¨è½¬æ¢ï¼ˆè½¬æ¢åŠ¨ä½œï¼‰</span>
<span class="token keyword">const</span> stateB <span class="token operator">=</span> counterMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'counting'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'DO_NOTHING'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stateB<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// ['logNothing']</span>

<span class="token keyword">const</span> stateC <span class="token operator">=</span> counterMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'counting'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'INC'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stateB<span class="token punctuation">.</span>actions<span class="token punctuation">;</span>
<span class="token comment">// ['increment']</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/davidkpiano/xstate/edit/main/docs/zh/guides/actions.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2023/3/2 21:37:47</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/docs/zh/guides/effects.html" class="prev">
        ä½œç”¨ Effects
      </a></span> <span class="next"><a href="/docs/zh/guides/guards.html">
        å®ˆå«ï¼ˆGuardedï¼‰è½¬æ¢
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b1166240.js" defer></script><script src="/docs/assets/js/3.0f500953.js" defer></script><script src="/docs/assets/js/12.91d2277e.js" defer></script><script src="/docs/assets/js/172.8a352738.js" defer></script><script src="/docs/assets/js/13.849ee94d.js" defer></script>
  </body>
</html>
