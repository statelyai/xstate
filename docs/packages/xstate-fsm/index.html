<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>@xstate/fsm | XState Docs</title>
    <meta name="description" content="Documentation for XState: State Machines and Statecharts for the Modern Web">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.04bea4c9.css" as="style"><link rel="preload" href="/docs/assets/js/app.fb439f2a.js" as="script"><link rel="preload" href="/docs/assets/js/3.112a8da6.js" as="script"><link rel="preload" href="/docs/assets/js/37.598a2998.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.60d039ca.js"><link rel="prefetch" href="/docs/assets/js/11.d660fb16.js"><link rel="prefetch" href="/docs/assets/js/12.b5a7c834.js"><link rel="prefetch" href="/docs/assets/js/13.dc5cbc64.js"><link rel="prefetch" href="/docs/assets/js/14.5d26eafd.js"><link rel="prefetch" href="/docs/assets/js/15.e7b1a298.js"><link rel="prefetch" href="/docs/assets/js/16.53cf4eca.js"><link rel="prefetch" href="/docs/assets/js/17.4fe317ca.js"><link rel="prefetch" href="/docs/assets/js/18.1f142663.js"><link rel="prefetch" href="/docs/assets/js/19.1d4493c0.js"><link rel="prefetch" href="/docs/assets/js/20.edf31583.js"><link rel="prefetch" href="/docs/assets/js/21.3b8dd115.js"><link rel="prefetch" href="/docs/assets/js/22.d53f9e77.js"><link rel="prefetch" href="/docs/assets/js/23.2e2f88bb.js"><link rel="prefetch" href="/docs/assets/js/24.b8d241d6.js"><link rel="prefetch" href="/docs/assets/js/25.b0ed6bb0.js"><link rel="prefetch" href="/docs/assets/js/26.96bc912d.js"><link rel="prefetch" href="/docs/assets/js/27.5513b918.js"><link rel="prefetch" href="/docs/assets/js/28.8b76f663.js"><link rel="prefetch" href="/docs/assets/js/29.fa411011.js"><link rel="prefetch" href="/docs/assets/js/30.b9565517.js"><link rel="prefetch" href="/docs/assets/js/31.3071fa2d.js"><link rel="prefetch" href="/docs/assets/js/32.5ee6f60b.js"><link rel="prefetch" href="/docs/assets/js/33.5b92bd57.js"><link rel="prefetch" href="/docs/assets/js/34.960ef67d.js"><link rel="prefetch" href="/docs/assets/js/35.fed126f1.js"><link rel="prefetch" href="/docs/assets/js/36.4a3680e8.js"><link rel="prefetch" href="/docs/assets/js/38.adb6c4b1.js"><link rel="prefetch" href="/docs/assets/js/39.7d1a8e47.js"><link rel="prefetch" href="/docs/assets/js/4.7e654600.js"><link rel="prefetch" href="/docs/assets/js/40.e175cc62.js"><link rel="prefetch" href="/docs/assets/js/41.c7a30d34.js"><link rel="prefetch" href="/docs/assets/js/42.f3f62f18.js"><link rel="prefetch" href="/docs/assets/js/43.a9dd398e.js"><link rel="prefetch" href="/docs/assets/js/44.faa188ab.js"><link rel="prefetch" href="/docs/assets/js/45.b25ffe69.js"><link rel="prefetch" href="/docs/assets/js/46.e0385911.js"><link rel="prefetch" href="/docs/assets/js/47.f75611c7.js"><link rel="prefetch" href="/docs/assets/js/5.88dc539a.js"><link rel="prefetch" href="/docs/assets/js/6.67658eb3.js"><link rel="prefetch" href="/docs/assets/js/7.a9c19923.js"><link rel="prefetch" href="/docs/assets/js/8.e8a7d5d6.js"><link rel="prefetch" href="/docs/assets/js/9.8fd3d87d.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.086ca35a.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.04bea4c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.svg" alt="XState Docs" class="logo"> <span class="site-name can-hide">XState Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://xstate.js.org/api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://xstate.js.org/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Visualizer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/statecharts/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://spectrum.chat/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://xstate.js.org/api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://xstate.js.org/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Visualizer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/statecharts/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://spectrum.chat/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Recipes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Packages</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/packages/xstate-react/" class="sidebar-link">@xstate/react</a></li><li><a href="/docs/packages/xstate-graph/" class="sidebar-link">@xstate/graph</a></li><li><a href="/docs/packages/xstate-fsm/" class="active sidebar-link">@xstate/fsm</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/packages/xstate-fsm/#super-quick-start" class="sidebar-link">Super quick start</a></li><li class="sidebar-sub-header"><a href="/docs/packages/xstate-fsm/#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/docs/packages/xstate-fsm/#usage" class="sidebar-link">Usage</a></li></ul></li><li><a href="/docs/packages/xstate-immer/" class="sidebar-link">@xstate/immer</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Examples</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="xstate-fsm"><a href="#xstate-fsm" aria-hidden="true" class="header-anchor">#</a> @xstate/fsm</h1> <p>This package contains a minimal implementation of XState for finite state machines.</p> <p><strong>Features:</strong></p> <ul><li>Finite states (non-nested)</li> <li>Initial state</li> <li>Transitions (object or strings)</li> <li>Context</li> <li>Entry actions</li> <li>Exit actions</li> <li>Transition actions</li> <li><code>state.changed</code></li></ul> <p>If you want to use statechart features such as nested states, parallel states, history states, activities, invoked services, delayed transitions, transient transitions, etc. please use <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer"><code>XState</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="super-quick-start"><a href="#super-quick-start" aria-hidden="true" class="header-anchor">#</a> Super quick start</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i @xstate/fsm
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FSM</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@xstate/fsm'</span><span class="token punctuation">;</span>

<span class="token comment">// Stateless FSM definition</span>
<span class="token comment">// machine.transition(...) is a pure function.</span>
<span class="token keyword">const</span> toggleFSM <span class="token operator">=</span> <span class="token constant">FSM</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'toggle'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'inactive'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    inactive<span class="token punctuation">:</span> <span class="token punctuation">{</span> on<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token constant">TOGGLE</span><span class="token punctuation">:</span> <span class="token string">'active'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    active<span class="token punctuation">:</span> <span class="token punctuation">{</span> on<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token constant">TOGGLE</span><span class="token punctuation">:</span> <span class="token string">'inactive'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> initialState <span class="token punctuation">}</span> <span class="token operator">=</span> toggleFSM<span class="token punctuation">;</span>

<span class="token keyword">const</span> toggledState <span class="token operator">=</span> toggleFSM<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>initialState<span class="token punctuation">,</span> <span class="token string">'TOGGLE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
toggledState<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'active'</span>

<span class="token keyword">const</span> untoggledState <span class="token operator">=</span> toggleFSM<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>toggledState<span class="token punctuation">,</span> <span class="token string">'TOGGLE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
untoggledState<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'inactive'</span>
</code></pre></div><h2 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> API</h2> <h3 id="fsm-config"><a href="#fsm-config" aria-hidden="true" class="header-anchor">#</a> <code>FSM(config)</code></h3> <p>Creates a new finite state machine (FSM) from the config, which has this schema:</p> <h3 id="machine-config"><a href="#machine-config" aria-hidden="true" class="header-anchor">#</a> Machine config</h3> <ul><li><code>id</code> (string) - an identifier for the type of machine this is. Useful for debugging.</li> <li><code>initial</code> (string) - the key of the initial state.</li> <li><code>states</code> (object) - an object mapping state names (keys) to <a href="#state-config">states</a></li></ul> <h3 id="state-config"><a href="#state-config" aria-hidden="true" class="header-anchor">#</a> State config</h3> <ul><li><code>on</code> (object) - an object mapping event types (keys) to <a href="#transition-config">transitions</a></li></ul> <h3 id="transition-config"><a href="#transition-config" aria-hidden="true" class="header-anchor">#</a> Transition config</h3> <p>String syntax:</p> <ul><li>(string) - the state name to transition to.
<ul><li>Same as <code>{ target: stateName }</code></li></ul></li></ul> <p>Object syntax:</p> <ul><li><code>target?</code> (string) - the state name to transition to.</li> <li><code>actions?</code> (Action | Action[]) - the <a href="#action-config">action(s)</a> to execute when this transition is taken.</li> <li><code>cond?</code> (Guard) - the condition (predicate function) to test. If it returns <code>true</code>, the transition will be taken.</li></ul> <h3 id="action-config"><a href="#action-config" aria-hidden="true" class="header-anchor">#</a> Action config</h3> <p>String syntax:</p> <ul><li>(string) - the action type.
<ul><li>Resolves to <code>{ type: actionType, exec: undefined }</code></li></ul></li></ul> <p>Function syntax:</p> <ul><li>(function) - the action function to execute. Resolves to <code>{ type: actionFn.name, exec: actionFn }</code> and the function takes the following arguments:
<ol><li><code>context</code> (any) - the machine's current <code>context</code>.</li> <li><code>event</code> (object) - the event that caused the action to be executed.</li></ol></li></ul> <p>Object syntax:</p> <ul><li><code>type</code> (string) - the action type.</li> <li><code>exec?</code> (function) - the action function to execute.</li></ul> <h2 id="usage"><a href="#usage" aria-hidden="true" class="header-anchor">#</a> Usage</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FSM</span><span class="token punctuation">,</span> assign <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@xstate/fsm'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> lightFSM <span class="token operator">=</span> <span class="token constant">FSM</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'light'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
  context<span class="token punctuation">:</span> <span class="token punctuation">{</span> redLights<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    green<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TIMER</span><span class="token punctuation">:</span> <span class="token string">'yellow'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    yellow<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TIMER</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          target<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
          <span class="token function-variable function">actions</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Going to red!'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    red<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      entry<span class="token punctuation">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">redLights</span><span class="token punctuation">:</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>redLights <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token constant">TIMER</span><span class="token punctuation">:</span> <span class="token string">'green'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> initialState <span class="token punctuation">}</span> <span class="token operator">=</span> lightFSM<span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//   value: 'green',</span>
<span class="token comment">//   context: { redLights: 0 },</span>
<span class="token comment">//   actions: [],</span>
<span class="token comment">//   changed: undefined</span>
<span class="token comment">// }</span>

<span class="token keyword">const</span> yellowState <span class="token operator">=</span> lightFSM<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>initialState<span class="token punctuation">,</span> <span class="token string">'TIMER'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//   value: 'yellow',</span>
<span class="token comment">//   context: { redLights: 0 },</span>
<span class="token comment">//   actions: [</span>
<span class="token comment">//     { type: undefined, exec: () =&gt; console.log('Going to red!') }</span>
<span class="token comment">//   ],</span>
<span class="token comment">//   changed: true</span>
<span class="token comment">// }</span>

<span class="token keyword">const</span> redState <span class="token operator">=</span> lightFSM<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>yellowState<span class="token punctuation">,</span> <span class="token string">'TIMER'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//   value: 'red',</span>
<span class="token comment">//   context: { redLights: 1 },</span>
<span class="token comment">//   actions: [],</span>
<span class="token comment">//   changed: true</span>
<span class="token comment">// }</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/davidkpiano/xstate/edit/master/docs/packages/xstate-fsm/index.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">5/27/2019, 7:35:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/packages/xstate-graph/" class="prev">
          @xstate/graph
        </a></span> <span class="next"><a href="/docs/packages/xstate-immer/">
          @xstate/immer
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.fb439f2a.js" defer></script><script src="/docs/assets/js/3.112a8da6.js" defer></script><script src="/docs/assets/js/37.598a2998.js" defer></script>
  </body>
</html>
