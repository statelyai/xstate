<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transitions | XState Docs</title>
    <meta name="description" content="Documentation for XState: State Machines and Statecharts for the Modern Web">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.ae7a7b63.css" as="style"><link rel="preload" href="/docs/assets/js/app.e1809e4b.js" as="script"><link rel="preload" href="/docs/assets/js/3.32f7f905.js" as="script"><link rel="preload" href="/docs/assets/js/36.06302f51.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.14ed0015.js"><link rel="prefetch" href="/docs/assets/js/11.c446dc75.js"><link rel="prefetch" href="/docs/assets/js/12.d4a2ddef.js"><link rel="prefetch" href="/docs/assets/js/13.0085a268.js"><link rel="prefetch" href="/docs/assets/js/14.466e995a.js"><link rel="prefetch" href="/docs/assets/js/15.d2ffedd5.js"><link rel="prefetch" href="/docs/assets/js/16.2bf6844f.js"><link rel="prefetch" href="/docs/assets/js/17.2e76ad6f.js"><link rel="prefetch" href="/docs/assets/js/18.dd0a746a.js"><link rel="prefetch" href="/docs/assets/js/19.290c156c.js"><link rel="prefetch" href="/docs/assets/js/20.f27626fb.js"><link rel="prefetch" href="/docs/assets/js/21.588ec485.js"><link rel="prefetch" href="/docs/assets/js/22.628e17dc.js"><link rel="prefetch" href="/docs/assets/js/23.35fd461b.js"><link rel="prefetch" href="/docs/assets/js/24.3477d423.js"><link rel="prefetch" href="/docs/assets/js/25.bca08293.js"><link rel="prefetch" href="/docs/assets/js/26.3f0c7e9f.js"><link rel="prefetch" href="/docs/assets/js/27.269f77f8.js"><link rel="prefetch" href="/docs/assets/js/28.262a53c2.js"><link rel="prefetch" href="/docs/assets/js/29.c95b19a5.js"><link rel="prefetch" href="/docs/assets/js/30.bf718320.js"><link rel="prefetch" href="/docs/assets/js/31.232dcd95.js"><link rel="prefetch" href="/docs/assets/js/32.fa73c7bb.js"><link rel="prefetch" href="/docs/assets/js/33.2d19cbc9.js"><link rel="prefetch" href="/docs/assets/js/34.6e009ff8.js"><link rel="prefetch" href="/docs/assets/js/35.5815214c.js"><link rel="prefetch" href="/docs/assets/js/37.6733bf05.js"><link rel="prefetch" href="/docs/assets/js/38.43d91ab4.js"><link rel="prefetch" href="/docs/assets/js/39.2be0c58b.js"><link rel="prefetch" href="/docs/assets/js/4.10b26b5d.js"><link rel="prefetch" href="/docs/assets/js/40.dbe113c0.js"><link rel="prefetch" href="/docs/assets/js/41.9921047c.js"><link rel="prefetch" href="/docs/assets/js/42.3ea5a388.js"><link rel="prefetch" href="/docs/assets/js/43.2fdeaaa0.js"><link rel="prefetch" href="/docs/assets/js/44.38f3266d.js"><link rel="prefetch" href="/docs/assets/js/45.1648099a.js"><link rel="prefetch" href="/docs/assets/js/46.e6bfca3c.js"><link rel="prefetch" href="/docs/assets/js/47.a260779b.js"><link rel="prefetch" href="/docs/assets/js/48.0bcdab4b.js"><link rel="prefetch" href="/docs/assets/js/49.10627273.js"><link rel="prefetch" href="/docs/assets/js/5.23844012.js"><link rel="prefetch" href="/docs/assets/js/50.749b6453.js"><link rel="prefetch" href="/docs/assets/js/51.ba28bf40.js"><link rel="prefetch" href="/docs/assets/js/52.71864161.js"><link rel="prefetch" href="/docs/assets/js/6.aa3a57af.js"><link rel="prefetch" href="/docs/assets/js/7.2898c70f.js"><link rel="prefetch" href="/docs/assets/js/8.cf4d1ee9.js"><link rel="prefetch" href="/docs/assets/js/9.3a71b1df.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.edbc4682.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.ae7a7b63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.svg" alt="XState Docs" class="logo"> <span class="site-name can-hide">XState Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://xstate.js.org/api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://xstate.js.org/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Visualizer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/statecharts/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://spectrum.chat/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://xstate.js.org/api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://xstate.js.org/viz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Visualizer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/statecharts/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://spectrum.chat/statecharts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Community
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/davidkpiano/xstate" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guides</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/guides/start.html" class="sidebar-link">Getting Started</a></li><li><a href="/docs/guides/installation.html" class="sidebar-link">Installation</a></li><li><a href="/docs/guides/machines.html" class="sidebar-link">Machines</a></li><li><a href="/docs/guides/states.html" class="sidebar-link">States</a></li><li><a href="/docs/guides/statenodes.html" class="sidebar-link">State Nodes</a></li><li><a href="/docs/guides/events.html" class="sidebar-link">Events</a></li><li><a href="/docs/guides/transitions.html" class="active sidebar-link">Transitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#machine-transition-method" class="sidebar-link">Machine .transition Method</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#selecting-enabled-transitions" class="sidebar-link">Selecting Enabled Transitions</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#event-descriptors" class="sidebar-link">Event Descriptors</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#self-transitions" class="sidebar-link">Self Transitions</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#internal-transitions" class="sidebar-link">Internal Transitions</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#external-transitions" class="sidebar-link">External Transitions</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#transient-transitions" class="sidebar-link">Transient Transitions</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#forbidden-transitions" class="sidebar-link">Forbidden Transitions</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#multiple-targets" class="sidebar-link">Multiple Targets</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#wildcard-descriptors" class="sidebar-link">Wildcard Descriptors</a></li><li class="sidebar-sub-header"><a href="/docs/guides/transitions.html#scxml" class="sidebar-link">SCXML</a></li></ul></li><li><a href="/docs/guides/hierarchical.html" class="sidebar-link">Hierarchical State Nodes</a></li><li><a href="/docs/guides/parallel.html" class="sidebar-link">Parallel State Nodes</a></li><li><a href="/docs/guides/effects.html" class="sidebar-link">Effects</a></li><li><a href="/docs/guides/actions.html" class="sidebar-link">Actions</a></li><li><a href="/docs/guides/guards.html" class="sidebar-link">Guards</a></li><li><a href="/docs/guides/context.html" class="sidebar-link">Context</a></li><li><a href="/docs/guides/activities.html" class="sidebar-link">Activities</a></li><li><a href="/docs/guides/communication.html" class="sidebar-link">Invoking Services</a></li><li><a href="/docs/guides/actors.html" class="sidebar-link">Actors</a></li><li><a href="/docs/guides/delays.html" class="sidebar-link">Delayed Events and Transitions</a></li><li><a href="/docs/guides/final.html" class="sidebar-link">Final States</a></li><li><a href="/docs/guides/history.html" class="sidebar-link">History</a></li><li><a href="/docs/guides/ids.html" class="sidebar-link">Identifying State Nodes</a></li><li><a href="/docs/guides/interpretation.html" class="sidebar-link">Interpreting Machines</a></li><li><a href="/docs/guides/typescript.html" class="sidebar-link">Using TypeScript</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Recipes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Packages</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Examples</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="transitions"><a href="#transitions" class="header-anchor">#</a> Transitions</h1> <p>A state transition defines what the <strong>next state</strong> is, given the <strong>current state</strong> and <a href="/docs/guides/events.html"><strong>event</strong></a>. State transitions are defined on state nodes, in the <code>on</code> property:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Machine <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> promiseMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'promise'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'pending'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pending<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// state transition (shorthand)</span>
        <span class="token comment">// this is equivalent to { target: 'resolved' }</span>
        <span class="token constant">RESOLVE</span><span class="token punctuation">:</span> <span class="token string">'resolved'</span><span class="token punctuation">,</span>

        <span class="token comment">// state transition (object)</span>
        <span class="token constant">REJECT</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          target<span class="token punctuation">:</span> <span class="token string">'rejected'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    resolved<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'final'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rejected<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'final'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> initialState <span class="token punctuation">}</span> <span class="token operator">=</span> promiseMachine<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>initialState<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'pending'</span>

<span class="token keyword">const</span> nextState <span class="token operator">=</span> promiseMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>initialState<span class="token punctuation">,</span> <span class="token string">'RESOLVE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextState<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'resolved'</span>
</code></pre></div><p>In the above example, when the machine is in the <code>pending</code> state and it receives a <code>RESOLVE</code> event, it will transition to the <code>resolved</code> state.</p> <p>A state transition can be defined as:</p> <ul><li>a string, e.g., <code>RESOLVE: 'resolved'</code>, which is equivalent to...</li> <li>an object with a <code>target</code> property, e.g., <code>RESOLVE: { target: 'resolved' }</code>,</li> <li>an array of transition objects, which are used for conditional transitions (see <a href="/docs/guides/guards.html">guards</a>)</li></ul> <h2 id="machine-transition-method"><a href="#machine-transition-method" class="header-anchor">#</a> Machine <code>.transition</code> Method</h2> <p>As seen above, the <code>machine.transition(...)</code> method is a pure function that takes two arguments:</p> <ul><li><code>state</code> - the <a href="/docs/guides/states.html">State</a> to transition from</li> <li><code>event</code> - the <a href="/docs/guides/events.html">event</a> that causes the transition</li></ul> <p>It returns a new <a href="/docs/guides/states.html#state-definition"><code>State</code> instance</a>, which is the result of taking all the transitions enabled by the current state and event.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> lightMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> greenState <span class="token operator">=</span> lightMachine<span class="token punctuation">.</span>initialState<span class="token punctuation">;</span>

<span class="token comment">// determine next state based on current state and event</span>
<span class="token keyword">const</span> yellowState <span class="token operator">=</span> lightMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>greenState<span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'TIMER'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yellowState<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'yellow'</span>
</code></pre></div><h2 id="selecting-enabled-transitions"><a href="#selecting-enabled-transitions" class="header-anchor">#</a> Selecting Enabled Transitions</h2> <p>An <strong>enabled transition</strong> is a transition that will be taken, given the current state and event. It will be taken if and only if:</p> <ul><li>it is defined on a <a href="/docs/guides/statenodes.html">state node</a> that matches the current state value</li> <li>the transition <a href="/docs/guides/guards.html">guard</a> (<code>cond</code> property) is satisfied (evaluates to <code>true</code>)</li> <li>it is not superseded by a more specific transition.</li></ul> <p>In a <a href="/docs/guides/hierarchical.html">hierarchical machine</a>, transitions are prioritized by how deep they are in the tree; deeper transitions are more specific and thus have higher priority. This works similar to how DOM events work: if you click a button, the click event handler directly on the button is more specific than a click event handler on the <code>window</code>.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> wizardMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'wizard'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'open'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    open<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      initial<span class="token punctuation">:</span> <span class="token string">'step1'</span><span class="token punctuation">,</span>
      states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        step1<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          on<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token constant">NEXT</span><span class="token punctuation">:</span> <span class="token string">'step2'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        step2<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">/* ... */</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        step3<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">/* ... */</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token constant">NEXT</span><span class="token punctuation">:</span> <span class="token string">'goodbye'</span><span class="token punctuation">,</span>
        <span class="token constant">CLOSE</span><span class="token punctuation">:</span> <span class="token string">'closed'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    goodbye<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token constant">CLOSE</span><span class="token punctuation">:</span> <span class="token string">'closed'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    closed<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'final'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// { open: 'step1' }</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> initialState <span class="token punctuation">}</span> <span class="token operator">=</span> wizardMachine<span class="token punctuation">;</span>

<span class="token comment">// the NEXT transition defined on 'open.step1'</span>
<span class="token comment">// supersedes the NEXT transition defined</span>
<span class="token comment">// on the parent 'open' state</span>
<span class="token keyword">const</span> nextStepState <span class="token operator">=</span> wizardMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>initialState<span class="token punctuation">,</span> <span class="token string">'NEXT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextStepState<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; { open: 'step2' }</span>

<span class="token comment">// there is no CLOSE transition on 'open.step1'</span>
<span class="token comment">// so the event is passed up to the parent</span>
<span class="token comment">// 'open' state, where it is defined</span>
<span class="token keyword">const</span> closedState <span class="token operator">=</span> wizardMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>initialState<span class="token punctuation">,</span> <span class="token string">'CLOSE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>closedState<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'closed'</span>
</code></pre></div><h2 id="event-descriptors"><a href="#event-descriptors" class="header-anchor">#</a> Event Descriptors</h2> <p>An event descriptor is a string describing the event type that the transition will match. Often, this is equivalent to the <code>event.type</code> property on the <code>event</code> object sent to the machine:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token punctuation">{</span>
  on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// &quot;CLICK&quot; is the event descriptor.</span>
    <span class="token comment">// This transition matches events with { type: 'CLICK' }</span>
    <span class="token constant">CLICK</span><span class="token punctuation">:</span> <span class="token string">'someState'</span><span class="token punctuation">,</span>
    <span class="token comment">// &quot;SUBMIT&quot; is the event descriptor.</span>
    <span class="token comment">// This transition matches events with { type: 'SUBMIT' }</span>
    <span class="token constant">SUBMIT</span><span class="token punctuation">:</span> <span class="token string">'anotherState'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><p>Other event descriptors include:</p> <ul><li><a href="#transient-transitions">Null event descriptors</a> (<code>&quot;&quot;</code>), which match no events (i.e., &quot;null&quot; events) and represent transitions taken immediately after the state is entered</li> <li><a href="#wildcard-descriptors">Wildcard event descriptors</a> (<code>&quot;*&quot;</code>), which match any event if the event is not matched explicitly by any other transition in the state</li></ul> <h2 id="self-transitions"><a href="#self-transitions" class="header-anchor">#</a> Self Transitions</h2> <p>A self-transition is when a state transitions to itself, in which it <em>may</em> exit and then reenter itself. Self-transitions can either be an <strong>internal</strong> or <strong>external</strong> transition:</p> <ul><li>An <strong>internal transition</strong> will not exit nor re-enter itself, but may enter different child states.</li> <li>An <strong>external transition</strong> will exit and re-enter itself, and may also exit/enter child states.</li></ul> <p>By default, all transitions with a specified target are external.</p> <p>See <a href="/docs/guides/actions.html#actions-on-self-transitions">actions on self-transitions</a> for more details on how entry/exit actions are executed on self-transitions.</p> <h2 id="internal-transitions"><a href="#internal-transitions" class="header-anchor">#</a> Internal Transitions</h2> <p>An internal transition is one that does not exit its state node. Internal transitions are created by specifying a <a href="/docs/guides/ids.html#relative-targets">relative target</a> (e.g., <code>'.left'</code>) or by explicitly setting <code>{ internal: true }</code> on the transition. For example, consider a machine that sets a paragraph of text to align <code>'left'</code>, <code>'right'</code>, <code>'center'</code>, or <code>'justify'</code>:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Machine <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'xstate'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> wordMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'word'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    right<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    center<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    justify<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// internal transitions</span>
    <span class="token constant">LEFT_CLICK</span><span class="token punctuation">:</span> <span class="token string">'.left'</span><span class="token punctuation">,</span>
    <span class="token constant">RIGHT_CLICK</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'.right'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// same as '.right'</span>
    <span class="token constant">CENTER_CLICK</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'.center'</span><span class="token punctuation">,</span> internal<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// same as '.center'</span>
    <span class="token constant">JUSTIFY_CLICK</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'word.justify'</span><span class="token punctuation">,</span> internal<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token comment">// same as '.justify'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The above machine will start in the <code>'left'</code> state (for reference, the full path and default ID is <code>'word.left'</code>), and based on what is clicked, will internally transition to its other child states. Also, since the transitions are internal, <code>entry</code>, <code>exit</code> or any of the <code>actions</code> defined on the parent state node are not executed again.</p> <p>Transitions that have <code>{ target: undefined }</code> (or no <code>target</code>) are also internal transitions:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> buttonMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'inactive'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    inactive<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token constant">PUSH</span><span class="token punctuation">:</span> <span class="token string">'active'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    active<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// No target - internal transition</span>
        <span class="token constant">PUSH</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          actions<span class="token punctuation">:</span> <span class="token string">'logPushed'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Summary of internal transitions:</strong></p> <ul><li><code>EVENT: '.foo'</code> - internal transition to child</li> <li><code>EVENT: { target: '.foo' }</code> - internal transition to child (starts with <code>'.'</code>)</li> <li><code>EVENT: { target: 'same.foo', internal: true }</code> - explicit internal transition to own child node (equivalent to <code>{ target: '.foo' }</code>)
<ul><li>This would otherwise be an external transition</li></ul></li> <li><code>EVENT: undefined</code> - forbidden transition</li> <li><code>EVENT: { actions: [ ... ] }</code> - internal self-transition</li> <li><code>EVENT: { actions: [ ... ], internal: true }</code> - internal self-transition, same as above</li> <li><code>EVENT: { target: undefined, actions: [ ... ] }</code> - internal self-transition, same as above</li></ul> <h2 id="external-transitions"><a href="#external-transitions" class="header-anchor">#</a> External Transitions</h2> <p>External transitions <em>will</em> exit and reenter the state node in which the transition is defined. In the above example, the parent <code>word</code> state node (the root state node) will have its <code>exit</code> and <code>entry</code> actions executed on its transitions.</p> <p>By default, transitions are external, but any transition can be made external by explicitly setting <code>{ internal: false }</code> on the transition.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token comment">// ...</span>
on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// external transitions</span>
  <span class="token constant">LEFT_CLICK</span><span class="token punctuation">:</span> <span class="token string">'word.left'</span><span class="token punctuation">,</span>
  <span class="token constant">RIGHT_CLICK</span><span class="token punctuation">:</span> <span class="token string">'word.right'</span><span class="token punctuation">,</span>
  <span class="token constant">CENTER_CLICK</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'.center'</span><span class="token punctuation">,</span> internal<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// same as 'word.center'</span>
  <span class="token constant">JUSTIFY_CLICK</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'word.justify'</span><span class="token punctuation">,</span> internal<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token comment">// same as 'word.justify'</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre></div><p>Every transition above is explicit and will have its <code>exit</code> and <code>entry</code> actions of the parent state executed.</p> <p><strong>Summary of external transitions:</strong></p> <ul><li><code>EVENT: { target: 'foo' }</code> - all transitions to siblings are external transitions</li> <li><code>EVENT: { target: '#someTarget' }</code> - all transitions to other nodes are external transitions</li> <li><code>EVENT: { target: 'same.foo' }</code> - external transition to own child node (equivalent to <code>{ target: '.foo', internal: false }</code>)</li> <li><code>EVENT: { target: '.foo', internal: false }</code> - external transition to child node
<ul><li>This would otherwise be an internal transition</li></ul></li> <li><code>EVENT: { actions: [ ... ], internal: false }</code> - external self-transition</li> <li><code>EVENT: { target: undefined, actions: [ ... ], internal: false }</code> - external self-transition, same as above</li></ul> <h2 id="transient-transitions"><a href="#transient-transitions" class="header-anchor">#</a> Transient Transitions</h2> <p>A transient transition is a transition that is enabled by a <a href="/docs/guides/events.html#null-events">null event</a>. In other words, it is a transition that is <em>immediately</em> taken (i.e., without a triggering event) as long as any conditions are met:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> gameMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token string">'game'</span><span class="token punctuation">,</span>
    initial<span class="token punctuation">:</span> <span class="token string">'playing'</span><span class="token punctuation">,</span>
    context<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      points<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      playing<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// Transient transition</span>
          <span class="token comment">// Will transition to either 'win' or 'lose' immediately upon</span>
          <span class="token comment">// (re)entering 'playing' state if the condition is met.</span>
          <span class="token string">''</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'win'</span><span class="token punctuation">,</span> cond<span class="token punctuation">:</span> <span class="token string">'didPlayerWin'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'lose'</span><span class="token punctuation">,</span> cond<span class="token punctuation">:</span> <span class="token string">'didPlayerLose'</span> <span class="token punctuation">}</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// Self-transition</span>
          <span class="token constant">AWARD_POINTS</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            actions<span class="token punctuation">:</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              points<span class="token punctuation">:</span> <span class="token number">100</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      win<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'final'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      lose<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'final'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    guards<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">didPlayerWin</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// check if player won</span>
        <span class="token keyword">return</span> context<span class="token punctuation">.</span>points <span class="token operator">&gt;</span> <span class="token number">99</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">didPlayerLose</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// check if player lost</span>
        <span class="token keyword">return</span> context<span class="token punctuation">.</span>points <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> gameService <span class="token operator">=</span> <span class="token function">interpret</span><span class="token punctuation">(</span>gameMachine<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">onTransition</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Still in 'playing' state because no conditions of</span>
<span class="token comment">// transient transition were met</span>
<span class="token comment">// =&gt; 'playing'</span>

<span class="token comment">// When 'AWARD_POINTS' is sent, a self-transition to 'PLAYING' occurs.</span>
<span class="token comment">// The transient transition to 'win' is taken because the 'didPlayerWin'</span>
<span class="token comment">// condition is satisfied.</span>
gameService<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'AWARD_POINTS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; 'win'</span>
</code></pre></div><p>Just like transitions, transient transitions can be specified as a single transition (e.g., <code>'': 'someTarget'</code>), or an array of conditional transitions. If no conditional transitions on a transient transition are met, the machine stays in the same state.</p> <p>Null events are always &quot;sent&quot; for every transition, internal or external.</p> <h2 id="forbidden-transitions"><a href="#forbidden-transitions" class="header-anchor">#</a> Forbidden Transitions</h2> <p>In XState, a &quot;forbidden&quot; transition is one that specifies that no state transition should occur with the specified event. That is, nothing should happen on a forbidden transition, and the event should not be handled by parent state nodes.</p> <p>A forbidden transition is made by specifying the <code>target</code> explicitly as <code>undefined</code>. This is the same as specifying it as an internal transition with no actions:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code>on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// forbidden transition</span>
  <span class="token constant">LOG</span><span class="token punctuation">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token comment">// same thing as...</span>
  <span class="token constant">LOG</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    actions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For example, we can model that telemetry can be logged for all events except when the user is entering personal information:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> formMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'form'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'firstPage'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    firstPage<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    secondPage<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    userInfoPage<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// explicitly forbid the LOG event from doing anything</span>
        <span class="token comment">// or taking any transitions to any other state</span>
        <span class="token constant">LOG</span><span class="token punctuation">:</span> <span class="token keyword">undefined</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token constant">LOG</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      actions<span class="token punctuation">:</span> <span class="token string">'logTelemetry'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="multiple-targets"><a href="#multiple-targets" class="header-anchor">#</a> Multiple Targets</h2> <p>A transition based on a single event can have multiple target state nodes. This is uncommon, and only valid if the state nodes are legal; e.g., a transition to two sibling state nodes in a compound state node is illegal, since a (non-parallel) state machine can only be in one state at any given time.</p> <p>Multiple targets are specified as an array in <code>target: [...]</code>, where each target in the array is a relative key or an ID to a state node, just like single targets.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> settingsMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'settings'</span><span class="token punctuation">,</span>
  type<span class="token punctuation">:</span> <span class="token string">'parallel'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      initial<span class="token punctuation">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
      states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        inactive<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        pending<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        active<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      initial<span class="token punctuation">:</span> <span class="token string">'enabled'</span><span class="token punctuation">,</span>
      states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        disabled<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        enabled<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Multiple targets</span>
    <span class="token constant">DEACTIVATE</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      target<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.mode.inactive'</span><span class="token punctuation">,</span> <span class="token string">'.status.disabled'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="wildcard-descriptors"><a href="#wildcard-descriptors" class="header-anchor">#</a> Wildcard Descriptors</h2> <p>A transition that is specified with a wildcard event descriptor (<code>&quot;*&quot;</code>) is activated by <em>any event</em>. This means that any event will match the transition that has <code>on: { &quot;*&quot;: ... }</code>, and if the guards pass, that transition will be taken.</p> <p>Explicit event descriptors will always be chosen over wildcard event descriptors, unless the transitions are specified in an array. In that case, the order of the transitions determines which transition gets chosen.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// For SOME_EVENT, the explicit transition to &quot;here&quot; will be taken</span>
on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;*&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;elsewhere&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;SOME_EVENT&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;here&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// For SOME_EVENT, the wildcard transition to &quot;elsewhere&quot; will be taken</span>
on<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> event<span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token string">&quot;elsewhere&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> event<span class="token punctuation">:</span> <span class="token string">&quot;SOME_EVENT&quot;</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token string">&quot;here&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Wildcard descriptors do <em>not</em> behave the same way as <a href="#transient-transitions">transient transitions</a> (with null event descriptors). Whereas transient transitions will be taken immediately whenever the state is active, wildcard transitions still need some event to be sent to its state to be triggered.</p></div> <p><strong>Example:</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> quietMachine <span class="token operator">=</span> <span class="token function">Machine</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'quiet'</span><span class="token punctuation">,</span>
  initial<span class="token punctuation">:</span> <span class="token string">'idle'</span><span class="token punctuation">,</span>
  states<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    idle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token constant">WHISPER</span><span class="token punctuation">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        <span class="token comment">// On any event besides a WHISPER, transition to the 'disturbed' state</span>
        <span class="token string">'*'</span><span class="token punctuation">:</span> <span class="token string">'disturbed'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    disturbed<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

quietMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>quietMachine<span class="token punctuation">.</span>initialState<span class="token punctuation">,</span> <span class="token string">'WHISPER'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; State { value: 'idle' }</span>

quietMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>quietMachine<span class="token punctuation">.</span>initialState<span class="token punctuation">,</span> <span class="token string">'SOME_EVENT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; State { value: 'disturbed' }</span>
</code></pre></div><h2 id="scxml"><a href="#scxml" class="header-anchor">#</a> SCXML</h2> <p>The event-target mappings defined on the <code>on: { ... }</code> property of state nodes is synonymous to the SCXML <code>&lt;transition&gt;</code> element:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  green<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    on<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token constant">TIMER</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'#yellow'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">cond</span><span class="token punctuation">:</span> <span class="token parameter">context</span> <span class="token operator">=&gt;</span> context<span class="token punctuation">.</span>timeElapsed <span class="token operator">&gt;</span> <span class="token number">5000</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token constant">POWER_OUTAGE</span><span class="token punctuation">:</span> <span class="token string">'#red.flashing'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>state</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span>
    <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>TIMER<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>yellow<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">cond</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>timeElapsed &gt; 5000<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span>
    <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>POWER_OUTAGE<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>red.flashing<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>state</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><a href="https://www.w3.org/TR/scxml/#transition" target="_blank" rel="noopener noreferrer">https://www.w3.org/TR/scxml/#transition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - the definition of <code>&lt;transition&gt;</code></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/davidkpiano/xstate/edit/master/docs/guides/transitions.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/6/2019, 8:27:01 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/guides/events.html" class="prev">Events</a></span> <span class="next"><a href="/docs/guides/hierarchical.html">Hierarchical State Nodes</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.e1809e4b.js" defer></script><script src="/docs/assets/js/3.32f7f905.js" defer></script><script src="/docs/assets/js/36.06302f51.js" defer></script>
  </body>
</html>
